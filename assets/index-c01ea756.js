var Ss=Object.defineProperty;var ws=(n,e,t)=>e in n?Ss(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var be=(n,e,t)=>(ws(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function q(){}function Me(n,e){for(const t in e)n[t]=e[t];return n}function Es(n){return!!n&&(typeof n=="object"||typeof n=="function")&&typeof n.then=="function"}function cs(n){return n()}function Mt(){return Object.create(null)}function me(n){n.forEach(cs)}function yt(n){return typeof n=="function"}function te(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let Je;function Ce(n,e){return Je||(Je=document.createElement("a")),Je.href=e,n===Je.href}function Cs(n){return Object.keys(n).length===0}function us(n,...e){if(n==null)return q;const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function pe(n,e,t){n.$$.on_destroy.push(us(e,t))}function St(n,e,t,s){if(n){const i=fs(n,e,t,s);return n[0](i)}}function fs(n,e,t,s){return n[1]&&s?Me(t.ctx.slice(),n[1](s(e))):t.ctx}function wt(n,e,t,s){if(n[2]&&s){const i=n[2](s(t));if(e.dirty===void 0)return i;if(typeof i=="object"){const o=[],r=Math.max(e.dirty.length,i.length);for(let l=0;l<r;l+=1)o[l]=e.dirty[l]|i[l];return o}return e.dirty|i}return e.dirty}function Et(n,e,t,s,i,o){if(i){const r=fs(e,t,s,o);n.p(r,i)}}function Ct(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let s=0;s<t;s++)e[s]=-1;return e}return-1}function dt(n){const e={};for(const t in n)t[0]!=="$"&&(e[t]=n[t]);return e}function At(n,e){const t={};e=new Set(e);for(const s in n)!e.has(s)&&s[0]!=="$"&&(t[s]=n[s]);return t}function hs(n,e,t){return n.set(t),e}function g(n,e){n.appendChild(e)}function D(n,e,t){n.insertBefore(e,t||null)}function A(n){n.parentNode&&n.parentNode.removeChild(n)}function Xe(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function k(n){return document.createElement(n)}function G(n){return document.createTextNode(n)}function T(){return G(" ")}function je(){return G("")}function U(n,e,t,s){return n.addEventListener(e,t,s),()=>n.removeEventListener(e,t,s)}function _s(n){return function(e){return e.preventDefault(),n.call(this,e)}}function b(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}const Ps=["width","height"];function Dt(n,e){const t=Object.getOwnPropertyDescriptors(n.__proto__);for(const s in e)e[s]==null?n.removeAttribute(s):s==="style"?n.style.cssText=e[s]:s==="__value"?n.value=n[s]=e[s]:t[s]&&t[s].set&&Ps.indexOf(s)===-1?n[s]=e[s]:b(n,s,e[s])}function Ts(n){return Array.from(n.childNodes)}function ge(n,e){e=""+e,n.data!==e&&(n.data=e)}function de(n,e){n.value=e??""}function ke(n,e,t,s){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,s?"important":"")}function Is(n,e,{bubbles:t=!1,cancelable:s=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(n,t,s,e),i}function Lt(n,e){return new n(e)}let Ue;function ye(n){Ue=n}function Fe(){if(!Ue)throw new Error("Function called outside component initialization");return Ue}function it(n){Fe().$$.on_mount.push(n)}function Ms(n){Fe().$$.on_destroy.push(n)}function As(){const n=Fe();return(e,t,{cancelable:s=!1}={})=>{const i=n.$$.callbacks[e];if(i){const o=Is(e,t,{cancelable:s});return i.slice().forEach(r=>{r.call(n,o)}),!o.defaultPrevented}return!0}}function rt(n,e){return Fe().$$.context.set(n,e),e}function He(n){return Fe().$$.context.get(n)}const Re=[],Ae=[];let Ke=[];const pt=[],Ds=Promise.resolve();let gt=!1;function Ls(){gt||(gt=!0,Ds.then(Pt))}function mt(n){Ke.push(n)}function et(n){pt.push(n)}const lt=new Set;let Oe=0;function Pt(){if(Oe!==0)return;const n=Ue;do{try{for(;Oe<Re.length;){const e=Re[Oe];Oe++,ye(e),Os(e.$$)}}catch(e){throw Re.length=0,Oe=0,e}for(ye(null),Re.length=0,Oe=0;Ae.length;)Ae.pop()();for(let e=0;e<Ke.length;e+=1){const t=Ke[e];lt.has(t)||(lt.add(t),t())}Ke.length=0}while(Re.length);for(;pt.length;)pt.pop()();gt=!1,lt.clear(),ye(n)}function Os(n){if(n.fragment!==null){n.update(),me(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(mt)}}function Ns(n){const e=[],t=[];Ke.forEach(s=>n.indexOf(s)===-1?e.push(s):t.push(s)),t.forEach(s=>s()),Ke=e}const Ve=new Set;let Te;function De(){Te={r:0,c:[],p:Te}}function Le(){Te.r||me(Te.c),Te=Te.p}function H(n,e){n&&n.i&&(Ve.delete(n),n.i(e))}function K(n,e,t,s){if(n&&n.o){if(Ve.has(n))return;Ve.add(n),Te.c.push(()=>{Ve.delete(n),s&&(t&&n.d(1),s())}),n.o(e)}else s&&s()}function Ot(n,e){const t=e.token={};function s(i,o,r,l){if(e.token!==t)return;e.resolved=l;let a=e.ctx;r!==void 0&&(a=a.slice(),a[r]=l);const c=i&&(e.current=i)(a);let u=!1;e.block&&(e.blocks?e.blocks.forEach((_,f)=>{f!==o&&_&&(De(),K(_,1,1,()=>{e.blocks[f]===_&&(e.blocks[f]=null)}),Le())}):e.block.d(1),c.c(),H(c,1),c.m(e.mount(),e.anchor),u=!0),e.block=c,e.blocks&&(e.blocks[o]=c),u&&Pt()}if(Es(n)){const i=Fe();if(n.then(o=>{ye(i),s(e.then,1,e.value,o),ye(null)},o=>{if(ye(i),s(e.catch,2,e.error,o),ye(null),!e.hasCatch)throw o}),e.current!==e.pending)return s(e.pending,0),!0}else{if(e.current!==e.then)return s(e.then,1,e.value,n),!0;e.resolved=n}}function Rs(n,e,t){const s=e.slice(),{resolved:i}=n;n.current===n.then&&(s[n.value]=i),n.current===n.catch&&(s[n.error]=i),n.block.p(s,t)}function qs(n,e){K(n,1,1,()=>{e.delete(n.key)})}function zs(n,e,t,s,i,o,r,l,a,c,u,_){let f=n.length,m=o.length,h=f;const d={};for(;h--;)d[n[h].key]=h;const p=[],v=new Map,w=new Map,y=[];for(h=m;h--;){const C=_(i,o,h),N=t(C);let O=r.get(N);O?s&&y.push(()=>O.p(C,e)):(O=c(N,C),O.c()),v.set(N,p[h]=O),N in d&&w.set(N,Math.abs(h-d[N]))}const I=new Set,M=new Set;function E(C){H(C,1),C.m(l,u),r.set(C.key,C),u=C.first,m--}for(;f&&m;){const C=p[m-1],N=n[f-1],O=C.key,j=N.key;C===N?(u=C.first,f--,m--):v.has(j)?!r.has(O)||I.has(O)?E(C):M.has(j)?f--:w.get(O)>w.get(j)?(M.add(O),E(C)):(I.add(j),f--):(a(N,r),f--)}for(;f--;){const C=n[f];v.has(C.key)||a(C,r)}for(;m;)E(p[m-1]);return me(y),p}function ds(n,e){const t={},s={},i={$$scope:1};let o=n.length;for(;o--;){const r=n[o],l=e[o];if(l){for(const a in r)a in l||(s[a]=1);for(const a in l)i[a]||(t[a]=l[a],i[a]=1);n[o]=l}else for(const a in r)i[a]=1}for(const r in s)r in t||(t[r]=void 0);return t}function Nt(n){return typeof n=="object"&&n!==null?n:{}}function tt(n,e,t){const s=n.$$.props[e];s!==void 0&&(n.$$.bound[s]=t,t(n.$$.ctx[s]))}function $(n){n&&n.c()}function V(n,e,t,s){const{fragment:i,after_update:o}=n.$$;i&&i.m(e,t),s||mt(()=>{const r=n.$$.on_mount.map(cs).filter(yt);n.$$.on_destroy?n.$$.on_destroy.push(...r):me(r),n.$$.on_mount=[]}),o.forEach(mt)}function x(n,e){const t=n.$$;t.fragment!==null&&(Ns(t.after_update),me(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Hs(n,e){n.$$.dirty[0]===-1&&(Re.push(n),Ls(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function ne(n,e,t,s,i,o,r,l=[-1]){const a=Ue;ye(n);const c=n.$$={fragment:null,ctx:[],props:o,update:q,not_equal:i,bound:Mt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Mt(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};r&&r(c.root);let u=!1;if(c.ctx=t?t(n,e.props||{},(_,f,...m)=>{const h=m.length?m[0]:f;return c.ctx&&i(c.ctx[_],c.ctx[_]=h)&&(!c.skip_bound&&c.bound[_]&&c.bound[_](h),u&&Hs(n,_)),f}):[],c.update(),u=!0,me(c.before_update),c.fragment=s?s(c.ctx):!1,e.target){if(e.hydrate){const _=Ts(e.target);c.fragment&&c.fragment.l(_),_.forEach(A)}else c.fragment&&c.fragment.c();e.intro&&H(n.$$.fragment),V(n,e.target,e.anchor,e.customElement),Pt()}ye(a)}class ie{$destroy(){x(this,1),this.$destroy=q}$on(e,t){if(!yt(t))return q;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(t),()=>{const i=s.indexOf(t);i!==-1&&s.splice(i,1)}}$set(e){this.$$set&&!Cs(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const bt={},st={},ps={},gs=/^:(.+)/,Rt=4,Ks=3,js=2,Fs=1,Bs=1,Qe=n=>n.replace(/(^\/+|\/+$)/g,"").split("/"),at=n=>n.replace(/(^\/+|\/+$)/g,""),Gs=(n,e)=>{const t=n.default?0:Qe(n.path).reduce((s,i)=>(s+=Rt,i===""?s+=Bs:gs.test(i)?s+=js:i[0]==="*"?s-=Rt+Fs:s+=Ks,s),0);return{route:n,score:t,index:e}},Us=n=>n.map(Gs).sort((e,t)=>e.score<t.score?1:e.score>t.score?-1:e.index-t.index),qt=(n,e)=>{let t,s;const[i]=e.split("?"),o=Qe(i),r=o[0]==="",l=Us(n);for(let a=0,c=l.length;a<c;a++){const u=l[a].route;let _=!1;if(u.default){s={route:u,params:{},uri:e};continue}const f=Qe(u.path),m={},h=Math.max(o.length,f.length);let d=0;for(;d<h;d++){const p=f[d],v=o[d];if(p&&p[0]==="*"){const y=p==="*"?"*":p.slice(1);m[y]=o.slice(d).map(decodeURIComponent).join("/");break}if(typeof v>"u"){_=!0;break}const w=gs.exec(p);if(w&&!r){const y=decodeURIComponent(v);m[w[1]]=y}else if(p!==v){_=!0;break}}if(!_){t={route:u,params:m,uri:"/"+o.slice(0,d).join("/")};break}}return t||s||null},ct=(n,e)=>n+(e?`?${e}`:""),Qs=(n,e)=>{if(n.startsWith("/"))return n;const[t,s]=n.split("?"),[i]=e.split("?"),o=Qe(t),r=Qe(i);if(o[0]==="")return ct(i,s);if(!o[0].startsWith(".")){const c=r.concat(o).join("/");return ct((i==="/"?"":"/")+c,s)}const l=r.concat(o),a=[];return l.forEach(c=>{c===".."?a.pop():c!=="."&&a.push(c)}),ct("/"+a.join("/"),s)},zt=(n,e)=>`${at(e==="/"?n:`${at(n)}/${at(e)}`)}/`,Ys=n=>!n.defaultPrevented&&n.button===0&&!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey),ms=()=>typeof window<"u"&&"document"in window&&"location"in window,Ws=n=>({active:n&4}),Ht=n=>({active:!!n[2]});function Xs(n){let e,t,s,i;const o=n[16].default,r=St(o,n,n[15],Ht);let l=[{href:n[0]},{"aria-current":n[2]},n[1],n[6]],a={};for(let c=0;c<l.length;c+=1)a=Me(a,l[c]);return{c(){e=k("a"),r&&r.c(),Dt(e,a)},m(c,u){D(c,e,u),r&&r.m(e,null),t=!0,s||(i=U(e,"click",n[5]),s=!0)},p(c,[u]){r&&r.p&&(!t||u&32772)&&Et(r,o,c,c[15],t?wt(o,c[15],u,Ws):Ct(c[15]),Ht),Dt(e,a=ds(l,[(!t||u&1)&&{href:c[0]},(!t||u&4)&&{"aria-current":c[2]},u&2&&c[1],u&64&&c[6]]))},i(c){t||(H(r,c),t=!0)},o(c){K(r,c),t=!1},d(c){c&&A(e),r&&r.d(c),s=!1,i()}}}function Js(n,e,t){let s;const i=["to","replace","state","getProps"];let o=At(e,i),r,l,{$$slots:a={},$$scope:c}=e,{to:u="#"}=e,{replace:_=!1}=e,{state:f={}}=e,{getProps:m=()=>({})}=e;const h=He(bt);pe(n,h,C=>t(13,r=C));const{base:d}=He(st);pe(n,d,C=>t(14,l=C));const{navigate:p}=He(ps),v=As();let w,y,I,M;const E=C=>{if(v("click",C),Ys(C)){C.preventDefault();const N=r.pathname===w||_;p(w,{state:f,replace:N})}};return n.$$set=C=>{e=Me(Me({},e),dt(C)),t(6,o=At(e,i)),"to"in C&&t(7,u=C.to),"replace"in C&&t(8,_=C.replace),"state"in C&&t(9,f=C.state),"getProps"in C&&t(10,m=C.getProps),"$$scope"in C&&t(15,c=C.$$scope)},n.$$.update=()=>{n.$$.dirty&16512&&t(0,w=u==="/"?l.uri:Qs(u,l.uri)),n.$$.dirty&8193&&t(11,y=r.pathname.startsWith(w)),n.$$.dirty&8193&&t(12,I=w===r.pathname),n.$$.dirty&4096&&t(2,s=I?"page":void 0),t(1,M=m({location:r,href:w,isPartiallyCurrent:y,isCurrent:I,existingProps:o}))},[w,M,s,h,d,E,o,u,_,f,m,y,I,r,l,c,a]}class Zs extends ie{constructor(e){super(),ne(this,e,Js,Xs,te,{to:7,replace:8,state:9,getProps:10})}}const Vs=n=>({params:n&4}),Kt=n=>({params:n[2]});function jt(n){let e,t,s,i;const o=[$s,xs],r=[];function l(a,c){return a[0]?0:1}return e=l(n),t=r[e]=o[e](n),{c(){t.c(),s=je()},m(a,c){r[e].m(a,c),D(a,s,c),i=!0},p(a,c){let u=e;e=l(a),e===u?r[e].p(a,c):(De(),K(r[u],1,1,()=>{r[u]=null}),Le(),t=r[e],t?t.p(a,c):(t=r[e]=o[e](a),t.c()),H(t,1),t.m(s.parentNode,s))},i(a){i||(H(t),i=!0)},o(a){K(t),i=!1},d(a){r[e].d(a),a&&A(s)}}}function xs(n){let e;const t=n[8].default,s=St(t,n,n[7],Kt);return{c(){s&&s.c()},m(i,o){s&&s.m(i,o),e=!0},p(i,o){s&&s.p&&(!e||o&132)&&Et(s,t,i,i[7],e?wt(t,i[7],o,Vs):Ct(i[7]),Kt)},i(i){e||(H(s,i),e=!0)},o(i){K(s,i),e=!1},d(i){s&&s.d(i)}}}function $s(n){let e,t,s,i={ctx:n,current:null,token:null,hasCatch:!1,pending:sn,then:tn,catch:en,value:12,blocks:[,,,]};return Ot(t=n[0],i),{c(){e=je(),i.block.c()},m(o,r){D(o,e,r),i.block.m(o,i.anchor=r),i.mount=()=>e.parentNode,i.anchor=e,s=!0},p(o,r){n=o,i.ctx=n,r&1&&t!==(t=n[0])&&Ot(t,i)||Rs(i,n,r)},i(o){s||(H(i.block),s=!0)},o(o){for(let r=0;r<3;r+=1){const l=i.blocks[r];K(l)}s=!1},d(o){o&&A(e),i.block.d(o),i.token=null,i=null}}}function en(n){return{c:q,m:q,p:q,i:q,o:q,d:q}}function tn(n){var l;let e,t,s;const i=[n[2],n[3]];var o=((l=n[12])==null?void 0:l.default)||n[12];function r(a){let c={};for(let u=0;u<i.length;u+=1)c=Me(c,i[u]);return{props:c}}return o&&(e=Lt(o,r())),{c(){e&&$(e.$$.fragment),t=je()},m(a,c){e&&V(e,a,c),D(a,t,c),s=!0},p(a,c){var _;const u=c&12?ds(i,[c&4&&Nt(a[2]),c&8&&Nt(a[3])]):{};if(c&1&&o!==(o=((_=a[12])==null?void 0:_.default)||a[12])){if(e){De();const f=e;K(f.$$.fragment,1,0,()=>{x(f,1)}),Le()}o?(e=Lt(o,r()),$(e.$$.fragment),H(e.$$.fragment,1),V(e,t.parentNode,t)):e=null}else o&&e.$set(u)},i(a){s||(e&&H(e.$$.fragment,a),s=!0)},o(a){e&&K(e.$$.fragment,a),s=!1},d(a){a&&A(t),e&&x(e,a)}}}function sn(n){return{c:q,m:q,p:q,i:q,o:q,d:q}}function nn(n){let e,t,s=n[1]&&n[1].route===n[5]&&jt(n);return{c(){s&&s.c(),e=je()},m(i,o){s&&s.m(i,o),D(i,e,o),t=!0},p(i,[o]){i[1]&&i[1].route===i[5]?s?(s.p(i,o),o&2&&H(s,1)):(s=jt(i),s.c(),H(s,1),s.m(e.parentNode,e)):s&&(De(),K(s,1,1,()=>{s=null}),Le())},i(i){t||(H(s),t=!0)},o(i){K(s),t=!1},d(i){s&&s.d(i),i&&A(e)}}}function on(n,e,t){let s,{$$slots:i={},$$scope:o}=e,{path:r=""}=e,{component:l=null}=e,a={},c={};const{registerRoute:u,unregisterRoute:_,activeRoute:f}=He(st);pe(n,f,h=>t(1,s=h));const m={path:r,default:r===""};return u(m),Ms(()=>{_(m)}),n.$$set=h=>{t(11,e=Me(Me({},e),dt(h))),"path"in h&&t(6,r=h.path),"component"in h&&t(0,l=h.component),"$$scope"in h&&t(7,o=h.$$scope)},n.$$.update=()=>{if(s&&s.route===m){t(2,a=s.params);const{component:h,path:d,...p}=e;t(3,c=p),h&&(h.toString().startsWith("class ")?t(0,l=h):t(0,l=h())),ms()&&(window==null||window.scrollTo(0,0))}},e=dt(e),[l,s,a,c,f,m,r,o,i]}class qe extends ie{constructor(e){super(),ne(this,e,on,nn,te,{path:6,component:0})}}const Ne=[];function rn(n,e){return{subscribe:ze(n,e).subscribe}}function ze(n,e=q){let t;const s=new Set;function i(l){if(te(n,l)&&(n=l,t)){const a=!Ne.length;for(const c of s)c[1](),Ne.push(c,n);if(a){for(let c=0;c<Ne.length;c+=2)Ne[c][0](Ne[c+1]);Ne.length=0}}}function o(l){i(l(n))}function r(l,a=q){const c=[l,a];return s.add(c),s.size===1&&(t=e(i)||q),l(n),()=>{s.delete(c),s.size===0&&t&&(t(),t=null)}}return{set:i,update:o,subscribe:r}}function ln(n,e,t){const s=!Array.isArray(n),i=s?[n]:n,o=e.length<2;return rn(t,r=>{let l=!1;const a=[];let c=0,u=q;const _=()=>{if(c)return;u();const m=e(s?a[0]:a,r);o?r(m):u=yt(m)?m:q},f=i.map((m,h)=>us(m,d=>{a[h]=d,c&=~(1<<h),l&&_()},()=>{c|=1<<h}));return l=!0,_(),function(){me(f),u(),l=!1}})}const ut=n=>({...n.location,state:n.history.state,key:n.history.state&&n.history.state.key||"initial"}),an=n=>{const e=[];let t=ut(n);return{get location(){return t},listen(s){e.push(s);const i=()=>{t=ut(n),s({location:t,action:"POP"})};return n.addEventListener("popstate",i),()=>{n.removeEventListener("popstate",i);const o=e.indexOf(s);e.splice(o,1)}},navigate(s,{state:i,replace:o=!1}={}){i={...i,key:Date.now()+""};try{o?n.history.replaceState(i,"",s):n.history.pushState(i,"",s)}catch{n.location[o?"replace":"assign"](s)}t=ut(n),e.forEach(r=>r({location:t,action:"PUSH"})),document.activeElement.blur()}}},cn=(n="/")=>{let e=0;const t=[{pathname:n,search:""}],s=[];return{get location(){return t[e]},addEventListener(i,o){},removeEventListener(i,o){},history:{get entries(){return t},get index(){return e},get state(){return s[e]},pushState(i,o,r){const[l,a=""]=r.split("?");e++,t.push({pathname:l,search:a}),s.push(i)},replaceState(i,o,r){const[l,a=""]=r.split("?");t[e]={pathname:l,search:a},s[e]=i}}}},bs=an(ms()?window:cn()),{navigate:Tt}=bs,un=n=>({route:n&2,location:n&1}),Ft=n=>({route:n[1]&&n[1].uri,location:n[0]});function fn(n){let e;const t=n[12].default,s=St(t,n,n[11],Ft);return{c(){s&&s.c()},m(i,o){s&&s.m(i,o),e=!0},p(i,[o]){s&&s.p&&(!e||o&2051)&&Et(s,t,i,i[11],e?wt(t,i[11],o,un):Ct(i[11]),Ft)},i(i){e||(H(s,i),e=!0)},o(i){K(s,i),e=!1},d(i){s&&s.d(i)}}}function hn(n,e,t){let s,i,o,r,{$$slots:l={},$$scope:a}=e,{basepath:c="/"}=e,{url:u=null}=e,{history:_=bs}=e;rt(ps,_);const f=He(bt),m=He(st),h=ze([]);pe(n,h,E=>t(9,i=E));const d=ze(null);pe(n,d,E=>t(1,r=E));let p=!1;const v=f||ze(u?{pathname:u}:_.location);pe(n,v,E=>t(0,s=E));const w=m?m.routerBase:ze({path:c,uri:c});pe(n,w,E=>t(10,o=E));const y=ln([w,d],([E,C])=>{if(!C)return E;const{path:N}=E,{route:O,uri:j}=C;return{path:O.default?N:O.path.replace(/\*.*$/,""),uri:j}}),I=E=>{const{path:C}=o;let{path:N}=E;if(E._path=N,E.path=zt(C,N),typeof window>"u"){if(p)return;const O=qt([E],s.pathname);O&&(d.set(O),p=!0)}else h.update(O=>[...O,E])},M=E=>{h.update(C=>C.filter(N=>N!==E))};return f||(it(()=>_.listen(C=>{v.set(C.location)})),rt(bt,v)),rt(st,{activeRoute:d,base:w,routerBase:y,registerRoute:I,unregisterRoute:M}),n.$$set=E=>{"basepath"in E&&t(6,c=E.basepath),"url"in E&&t(7,u=E.url),"history"in E&&t(8,_=E.history),"$$scope"in E&&t(11,a=E.$$scope)},n.$$.update=()=>{if(n.$$.dirty&1024){const{path:E}=o;h.update(C=>C.map(N=>Object.assign(N,{path:zt(E,N._path)})))}if(n.$$.dirty&513){const E=qt(i,s.pathname);d.set(E)}},[s,r,h,d,v,w,c,u,_,i,o,a,l]}class _n extends ie{constructor(e){super(),ne(this,e,hn,fn,te,{basepath:6,url:7,history:8})}}var xe;(function(n){var e=function(){function i(){this._dropEffect="move",this._effectAllowed="all",this._data={}}return Object.defineProperty(i.prototype,"dropEffect",{enumerable:!0,configurable:!0,get:function(){return this._dropEffect},set:function(o){this._dropEffect=o}}),Object.defineProperty(i.prototype,"effectAllowed",{enumerable:!0,configurable:!0,get:function(){return this._effectAllowed},set:function(o){this._effectAllowed=o}}),Object.defineProperty(i.prototype,"types",{enumerable:!0,configurable:!0,get:function(){return Object.keys(this._data)}}),i.prototype.clearData=function(o){o==null?this._data={}:delete this._data[o.toLowerCase()]},i.prototype.getData=function(o){return this._data[o.toLowerCase()]||""},i.prototype.setData=function(o,r){this._data[o.toLowerCase()]=r},i.prototype.setDragImage=function(o,r,l){var a=t._instance;a._imgCustom=o,a._imgOffset={x:r,y:l}},i}();n.DataTransfer=e;var t=function(){function i(){if(this._lastClick=0,t!=null&&t._instance!=null)throw new Error("DragDropTouch instance already created.");var r=!1;if(document.addEventListener("test",function(){},{get passive(){return r=!0,!0}}),navigator.maxTouchPoints>0){var l=this._touchstart.bind(this),a=this._touchmove.bind(this),c=this._touchend.bind(this),u=r?{passive:!1,capture:!1}:!1;document.addEventListener("touchstart",l,u),document.addEventListener("touchmove",a,u),document.addEventListener("touchend",c),document.addEventListener("touchcancel",c)}}i.getInstance=function(){return t._instance},i.prototype._touchstart=function(r){var l=this;if(this._shouldHandle(r)){if(Date.now()-this._lastClick<t._DBLCLICK&&this._dispatchEvent(r,"dblclick",r.target)){r.preventDefault(),this._reset();return}this._reset();var a=this._closestDraggable(r.target);a!=null&&!this._dispatchEvent(r,"mousemove",r.target)&&!this._dispatchEvent(r,"mousedown",r.target)&&(this._dragSource=a,this._ptDown=this._getPoint(r),this._lastTouch=r,r.preventDefault(),setTimeout(function(){l._dragSource===a&&l._img==null&&l._dispatchEvent(r,"contextmenu",a)&&l._reset()},t._CTXMENU),t._ISPRESSHOLDMODE&&(this._pressHoldInterval=setTimeout(function(){l._isDragEnabled=!0,l._touchmove(r)},t._PRESSHOLDAWAIT)))}},i.prototype._touchmove=function(r){if(this._shouldCancelPressHoldMove(r)){this._reset();return}if(this._shouldHandleMove(r)||this._shouldHandlePressHoldMove(r)){var l=this._getTarget(r);if(this._dispatchEvent(r,"mousemove",l)){this._lastTouch=r,r.preventDefault();return}var a=this._getPoint(this._lastTouch,!0),c=this._getPoint(r,!0);this._lastMovementX=c.x-a.x,this._lastMovementY=c.y-a.y;var u={movementX:this._lastMovementX,movementY:this._lastMovementY};this._dragSource&&this._img==null&&this._shouldStartDragging(r)&&(this._dispatchEvent(r,"dragstart",this._dragSource,u),this._createImage(r),this._dispatchEvent(r,"dragenter",l,u)),this._img!=null&&(this._lastTouch=r,r.preventDefault(),this._dispatchEvent(r,"drag",this._dragSource,u),l!=this._lastTarget&&(this._dispatchEvent(this._lastTouch,"dragleave",this._lastTarget,u),this._dispatchEvent(r,"dragenter",l,u),this._lastTarget=l),this._moveImage(r),this._isDropZone=this._dispatchEvent(r,"dragover",l,u))}},i.prototype._touchend=function(r){if(this._shouldHandle(r)){if(this._dispatchEvent(this._lastTouch,"mouseup",r.target)){r.preventDefault();return}if(this._img==null&&(this._dragSource=null,this._dispatchEvent(this._lastTouch,"click",r.target),this._lastClick=Date.now()),this._destroyImage(),this._dragSource){var l={movementX:this._lastMovementX,movementY:this._lastMovementY};r.type.indexOf("cancel")<0&&this._isDropZone&&this._dispatchEvent(this._lastTouch,"drop",this._lastTarget,l),this._dispatchEvent(this._lastTouch,"dragend",this._dragSource,l),this._reset()}}},i.prototype._shouldHandle=function(r){return r!=null&&!r.defaultPrevented&&r.touches!=null&&r.touches.length<2},i.prototype._shouldHandleMove=function(r){return!t._ISPRESSHOLDMODE&&this._shouldHandle(r)},i.prototype._shouldHandlePressHoldMove=function(r){return t._ISPRESSHOLDMODE&&this._isDragEnabled&&r!=null&&r.touches!=null&&r.touches.length>0},i.prototype._shouldCancelPressHoldMove=function(r){return t._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(r)>t._PRESSHOLDMARGIN},i.prototype._shouldStartDragging=function(r){var l=this._getDelta(r);return l>t._THRESHOLD||t._ISPRESSHOLDMODE&&l>=t._PRESSHOLDTHRESHOLD},i.prototype._reset=function(){this._destroyImage(),this._dragSource=null,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=new e,this._lastMovementX=0,this._lastMovementY=0,clearInterval(this._pressHoldInterval)},i.prototype._getPoint=function(r,l){if(r!=null&&r.touches!=null&&r.touches.length>0){var a=r.touches[0];return{x:l?a.pageX:a.clientX,y:l?a.pageY:a.clientY}}else{var c=r;return{x:l?c.pageX:c.clientX,y:l?c.pageY:c.clientY}}},i.prototype._getDelta=function(r){if(t._ISPRESSHOLDMODE&&!this._ptDown)return 0;var l=this._getPoint(r);return Math.abs(l.x-this._ptDown.x)+Math.abs(l.y-this._ptDown.y)},i.prototype._getTarget=function(r){for(var l=this._getPoint(r),a=document.elementFromPoint(l.x,l.y);a!=null&&getComputedStyle(a).pointerEvents=="none";)a=a.parentElement;return a},i.prototype._createImage=function(r){this._img!=null&&this._destroyImage();var l=this._imgCustom||this._dragSource;if(this._img=l.cloneNode(!0),this._copyStyle(l,this._img),this._img.style.top=this._img.style.left="-9999px",this._imgCustom==null){var a=l.getBoundingClientRect(),c=this._getPoint(r);this._imgOffset={x:c.x-a.left,y:c.y-a.top},this._img.style.opacity=t._OPACITY.toString()}this._moveImage(r),document.body.appendChild(this._img)},i.prototype._destroyImage=function(){this._img!=null&&this._img.parentElement!=null&&this._img.parentElement.removeChild(this._img),this._img=null,this._imgCustom=null},i.prototype._moveImage=function(r){var l=this;requestAnimationFrame(function(){if(l._img!=null){var a=l._getPoint(r,!0),c=l._img.style;c.position="absolute",c.pointerEvents="none",c.zIndex="999999",c.left=Math.round(a.x-l._imgOffset.x)+"px",c.top=Math.round(a.y-l._imgOffset.y)+"px"}})},i.prototype._copyProps=function(r,l,a){for(var c=0;c<a.length;c++){var u=a[c];r[u]=l[u]}},i.prototype._copyStyle=function(r,l){if(t._rmvAtts.forEach(function(m){l.removeAttribute(m)}),r instanceof HTMLCanvasElement){var a=r,c=l;c.width=a.width,c.height=a.height,c.getContext("2d").drawImage(a,0,0)}for(var u=getComputedStyle(r),_=0;_<u.length;_++){var f=u[_];f.indexOf("transition")<0&&(l.style[f]=u[f])}l.style.pointerEvents="none";for(var _=0;_<r.children.length;_++)this._copyStyle(r.children[_],l.children[_])},i.prototype._dispatchEvent=function(r,l,a,c){if(r!=null&&a!=null){var u=document.createEvent("Event"),_=r.touches!=null?r.touches[0]:r;return u.initEvent(l,!0,!0),u.button=0,u.which=u.buttons=1,this._copyProps(u,r,t._kbdProps),this._copyProps(u,_,t._ptProps),u.dataTransfer=this._dataTransfer,c!=null&&(u.movementX=c.movementX,u.movementY=c.movementY),a.dispatchEvent(u),u.defaultPrevented}return!1},i.prototype._closestDraggable=function(r){for(;r;r=r.parentElement)if(r.hasAttribute("draggable")&&r.getAttribute("draggable"))return r;return null};var o=new i;return o._instance=o,o}();n.DragDropTouch=t;var s=xe.DragDropTouch;s._THRESHOLD=5,s._OPACITY=.5,s._DBLCLICK=500,s._CTXMENU=900,s._ISPRESSHOLDMODE=!1,s._PRESSHOLDAWAIT=400,s._PRESSHOLDMARGIN=25,s._PRESSHOLDTHRESHOLD=0,s._rmvAtts="id,class,style,draggable".split(","),s._kbdProps="altKey,ctrlKey,metaKey,shiftKey".split(","),s._ptProps="pageX,pageY,clientX,clientY,screenX,screenY,offsetX,offsetY".split(",")})(xe||(xe={}));var dn=xe;dn.DragDropTouch;/**
 * @license
 * Copyright (c) 2023, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const ee="w",_e="b",J="p",vt="n",$e="b",Ge="r",Ee="q",Z="k",ft="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",ce=-1,pn={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},L={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},R={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},ht={b:[16,32,17,15],w:[-16,-32,-17,-15]},Bt={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},gn=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],mn=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],bn={p:1,n:2,b:4,r:8,q:16,k:32},vn="pnbrqkPNBRQK",Gt=[vt,$e,Ge,Ee],kn=7,yn=6,Sn=1,wn=0,Ze={[Z]:L.KSIDE_CASTLE,[Ee]:L.QSIDE_CASTLE},Se={w:[{square:R.a1,flag:L.QSIDE_CASTLE},{square:R.h1,flag:L.KSIDE_CASTLE}],b:[{square:R.a8,flag:L.QSIDE_CASTLE},{square:R.h8,flag:L.KSIDE_CASTLE}]},En={b:Sn,w:yn},Cn=["1-0","0-1","1/2-1/2","*"];function Ie(n){return n>>4}function Ye(n){return n&15}function vs(n){return"0123456789".indexOf(n)!==-1}function ue(n){const e=Ye(n),t=Ie(n);return"abcdefgh".substring(e,e+1)+"87654321".substring(t,t+1)}function Be(n){return n===ee?_e:ee}function Pn(n){const e=n.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const t=parseInt(e[5],10);if(isNaN(t)||t<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const s=parseInt(e[4],10);if(isNaN(s)||s<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const i=e[0].split("/");if(i.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let r=0;r<i.length;r++){let l=0,a=!1;for(let c=0;c<i[r].length;c++)if(vs(i[r][c])){if(a)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};l+=parseInt(i[r][c],10),a=!0}else{if(!/^[prnbqkPRNBQK]$/.test(i[r][c]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};l+=1,a=!1}if(l!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const o=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:r,regex:l}of o){if(!l.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${r} king`};if((e[0].match(l)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${r} kings`}}return{ok:!0}}function Tn(n,e){const t=n.from,s=n.to,i=n.piece;let o=0,r=0,l=0;for(let a=0,c=e.length;a<c;a++){const u=e[a].from,_=e[a].to,f=e[a].piece;i===f&&t!==u&&s===_&&(o++,Ie(t)===Ie(u)&&r++,Ye(t)===Ye(u)&&l++)}return o>0?r>0&&l>0?ue(t):l>0?ue(t).charAt(1):ue(t).charAt(0):""}function we(n,e,t,s,i,o=void 0,r=L.NORMAL){const l=Ie(s);if(i===J&&(l===kn||l===wn))for(let a=0;a<Gt.length;a++){const c=Gt[a];n.push({color:e,from:t,to:s,piece:i,captured:o,promotion:c,flags:r|L.PROMOTION})}else n.push({color:e,from:t,to:s,piece:i,captured:o,flags:r})}function Ut(n){let e=n.charAt(0);return e>="a"&&e<="h"?n.match(/[a-h]\d.*[a-h]\d/)?void 0:J:(e=e.toLowerCase(),e==="o"?Z:e)}function _t(n){return n.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class nt{constructor(e=ft){be(this,"_board",new Array(128));be(this,"_turn",ee);be(this,"_header",{});be(this,"_kings",{w:ce,b:ce});be(this,"_epSquare",-1);be(this,"_halfMoves",0);be(this,"_moveNumber",0);be(this,"_history",[]);be(this,"_comments",{});be(this,"_castling",{w:0,b:0});this.load(e)}clear(e=!1){this._board=new Array(128),this._kings={w:ce,b:ce},this._turn=ee,this._castling={w:0,b:0},this._epSquare=ce,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{},this._updateSetup(this.fen())}removeHeader(e){e in this._header&&delete this._header[e]}load(e,t=!1){let s=e.split(/\s+/);if(s.length>=2&&s.length<6){const a=["-","-","0","1"];e=s.concat(a.slice(-(6-s.length))).join(" ")}s=e.split(/\s+/);const{ok:i,error:o}=Pn(e);if(!i)throw new Error(o);const r=s[0];let l=0;this.clear(t);for(let a=0;a<r.length;a++){const c=r.charAt(a);if(c==="/")l+=8;else if(vs(c))l+=parseInt(c,10);else{const u=c<"a"?ee:_e;this.put({type:c.toLowerCase(),color:u},ue(l)),l++}}this._turn=s[1],s[2].indexOf("K")>-1&&(this._castling.w|=L.KSIDE_CASTLE),s[2].indexOf("Q")>-1&&(this._castling.w|=L.QSIDE_CASTLE),s[2].indexOf("k")>-1&&(this._castling.b|=L.KSIDE_CASTLE),s[2].indexOf("q")>-1&&(this._castling.b|=L.QSIDE_CASTLE),this._epSquare=s[3]==="-"?ce:R[s[3]],this._halfMoves=parseInt(s[4],10),this._moveNumber=parseInt(s[5],10),this._updateSetup(this.fen())}fen(){var o,r;let e=0,t="";for(let l=R.a8;l<=R.h1;l++){if(this._board[l]){e>0&&(t+=e,e=0);const{color:a,type:c}=this._board[l];t+=a===ee?c.toUpperCase():c.toLowerCase()}else e++;l+1&136&&(e>0&&(t+=e),l!==R.h1&&(t+="/"),e=0,l+=8)}let s="";this._castling[ee]&L.KSIDE_CASTLE&&(s+="K"),this._castling[ee]&L.QSIDE_CASTLE&&(s+="Q"),this._castling[_e]&L.KSIDE_CASTLE&&(s+="k"),this._castling[_e]&L.QSIDE_CASTLE&&(s+="q"),s=s||"-";let i="-";if(this._epSquare!==ce){const l=this._epSquare+(this._turn===ee?16:-16),a=[l+1,l-1];for(const c of a){if(c&136)continue;const u=this._turn;if(((o=this._board[c])==null?void 0:o.color)===u&&((r=this._board[c])==null?void 0:r.type)===J){this._makeMove({color:u,from:c,to:this._epSquare,piece:J,captured:J,flags:L.EP_CAPTURE});const _=!this._isKingAttacked(u);if(this._undoMove(),_){i=ue(this._epSquare);break}}}}return[t,this._turn,s,i,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(e){this._history.length>0||(e!==ft?(this._header.SetUp="1",this._header.FEN=e):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(ft)}get(e){return this._board[R[e]]||!1}put({type:e,color:t},s){if(vn.indexOf(e.toLowerCase())===-1||!(s in R))return!1;const i=R[s];return e==Z&&!(this._kings[t]==ce||this._kings[t]==i)?!1:(this._board[i]={type:e,color:t},e===Z&&(this._kings[t]=i),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0)}remove(e){const t=this.get(e);return delete this._board[R[e]],t&&t.type===Z&&(this._kings[t.color]=ce),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),t}_updateCastlingRights(){var s,i,o,r,l,a,c,u,_,f,m,h;const e=((s=this._board[R.e1])==null?void 0:s.type)===Z&&((i=this._board[R.e1])==null?void 0:i.color)===ee,t=((o=this._board[R.e8])==null?void 0:o.type)===Z&&((r=this._board[R.e8])==null?void 0:r.color)===_e;(!e||((l=this._board[R.a1])==null?void 0:l.type)!==Ge||((a=this._board[R.a1])==null?void 0:a.color)!==ee)&&(this._castling.w&=~L.QSIDE_CASTLE),(!e||((c=this._board[R.h1])==null?void 0:c.type)!==Ge||((u=this._board[R.h1])==null?void 0:u.color)!==ee)&&(this._castling.w&=~L.KSIDE_CASTLE),(!t||((_=this._board[R.a8])==null?void 0:_.type)!==Ge||((f=this._board[R.a8])==null?void 0:f.color)!==_e)&&(this._castling.b&=~L.QSIDE_CASTLE),(!t||((m=this._board[R.h8])==null?void 0:m.type)!==Ge||((h=this._board[R.h8])==null?void 0:h.color)!==_e)&&(this._castling.b&=~L.KSIDE_CASTLE)}_updateEnPassantSquare(){var o,r;if(this._epSquare===ce)return;const e=this._epSquare+(this._turn===ee?-16:16),t=this._epSquare+(this._turn===ee?16:-16),s=[t+1,t-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||((o=this._board[t])==null?void 0:o.color)!==Be(this._turn)||((r=this._board[t])==null?void 0:r.type)!==J){this._epSquare=ce;return}const i=l=>{var a,c;return!(l&136)&&((a=this._board[l])==null?void 0:a.color)===this._turn&&((c=this._board[l])==null?void 0:c.type)===J};s.some(i)||(this._epSquare=ce)}_attacked(e,t){for(let s=R.a8;s<=R.h1;s++){if(s&136){s+=7;continue}if(this._board[s]===void 0||this._board[s].color!==e)continue;const i=this._board[s],o=s-t;if(o===0)continue;const r=o+119;if(gn[r]&bn[i.type]){if(i.type===J){if(o>0){if(i.color===ee)return!0}else if(i.color===_e)return!0;continue}if(i.type==="n"||i.type==="k")return!0;const l=mn[r];let a=s+l,c=!1;for(;a!==t;){if(this._board[a]!=null){c=!0;break}a+=l}if(!c)return!0}}return!1}_isKingAttacked(e){const t=this._kings[e];return t===-1?!1:this._attacked(Be(e),t)}isAttacked(e,t){return this._attacked(t,R[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},t=[];let s=0,i=0;for(let o=R.a8;o<=R.h1;o++){if(i=(i+1)%2,o&136){o+=7;continue}const r=this._board[o];r&&(e[r.type]=r.type in e?e[r.type]+1:1,r.type===$e&&t.push(i),s++)}if(s===2)return!0;if(s===3&&(e[$e]===1||e[vt]===1))return!0;if(s===e[$e]+2){let o=0;const r=t.length;for(let l=0;l<r;l++)o+=t[l];if(o===0||o===r)return!0}return!1}isThreefoldRepetition(){const e=[],t={};let s=!1;for(;;){const i=this._undoMove();if(!i)break;e.push(i)}for(;;){const i=this.fen().split(" ").slice(0,4).join(" ");t[i]=i in t?t[i]+1:1,t[i]>=3&&(s=!0);const o=e.pop();if(o)this._makeMove(o);else break}return s}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:e=!1,square:t=void 0,piece:s=void 0}={}){const i=this._moves({square:t,piece:s});return e?i.map(o=>this._makePretty(o)):i.map(o=>this._moveToSan(o,i))}_moves({legal:e=!0,piece:t=void 0,square:s=void 0}={}){var m;const i=s?s.toLowerCase():void 0,o=t==null?void 0:t.toLowerCase(),r=[],l=this._turn,a=Be(l);let c=R.a8,u=R.h1,_=!1;if(i)if(i in R)c=u=R[i],_=!0;else return[];for(let h=c;h<=u;h++){if(h&136){h+=7;continue}if(!this._board[h]||this._board[h].color===a)continue;const{type:d}=this._board[h];let p;if(d===J){if(o&&o!==d)continue;p=h+ht[l][0],this._board[p]||(we(r,l,h,p,J),p=h+ht[l][1],En[l]===Ie(h)&&!this._board[p]&&we(r,l,h,p,J,void 0,L.BIG_PAWN));for(let v=2;v<4;v++)p=h+ht[l][v],!(p&136)&&(((m=this._board[p])==null?void 0:m.color)===a?we(r,l,h,p,J,this._board[p].type,L.CAPTURE):p===this._epSquare&&we(r,l,h,p,J,J,L.EP_CAPTURE))}else{if(o&&o!==d)continue;for(let v=0,w=Bt[d].length;v<w;v++){const y=Bt[d][v];for(p=h;p+=y,!(p&136);){if(!this._board[p])we(r,l,h,p,d);else{if(this._board[p].color===l)break;we(r,l,h,p,d,this._board[p].type,L.CAPTURE);break}if(d===vt||d===Z)break}}}}if((o===void 0||o===Z)&&(!_||u===this._kings[l])){if(this._castling[l]&L.KSIDE_CASTLE){const h=this._kings[l],d=h+2;!this._board[h+1]&&!this._board[d]&&!this._attacked(a,this._kings[l])&&!this._attacked(a,h+1)&&!this._attacked(a,d)&&we(r,l,this._kings[l],d,Z,void 0,L.KSIDE_CASTLE)}if(this._castling[l]&L.QSIDE_CASTLE){const h=this._kings[l],d=h-2;!this._board[h-1]&&!this._board[h-2]&&!this._board[h-3]&&!this._attacked(a,this._kings[l])&&!this._attacked(a,h-1)&&!this._attacked(a,d)&&we(r,l,this._kings[l],d,Z,void 0,L.QSIDE_CASTLE)}}if(!e||this._kings[l]===-1)return r;const f=[];for(let h=0,d=r.length;h<d;h++)this._makeMove(r[h]),this._isKingAttacked(l)||f.push(r[h]),this._undoMove();return f}move(e,{strict:t=!1}={}){let s=null;if(typeof e=="string")s=this._moveFromSan(e,t);else if(typeof e=="object"){const o=this._moves();for(let r=0,l=o.length;r<l;r++)if(e.from===ue(o[r].from)&&e.to===ue(o[r].to)&&(!("promotion"in o[r])||e.promotion===o[r].promotion)){s=o[r];break}}if(!s)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);const i=this._makePretty(s);return this._makeMove(s),i}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(e){const t=this._turn,s=Be(t);if(this._push(e),this._board[e.to]=this._board[e.from],delete this._board[e.from],e.flags&L.EP_CAPTURE&&(this._turn===_e?delete this._board[e.to-16]:delete this._board[e.to+16]),e.promotion&&(this._board[e.to]={type:e.promotion,color:t}),this._board[e.to].type===Z){if(this._kings[t]=e.to,e.flags&L.KSIDE_CASTLE){const i=e.to-1,o=e.to+1;this._board[i]=this._board[o],delete this._board[o]}else if(e.flags&L.QSIDE_CASTLE){const i=e.to+1,o=e.to-2;this._board[i]=this._board[o],delete this._board[o]}this._castling[t]=0}if(this._castling[t]){for(let i=0,o=Se[t].length;i<o;i++)if(e.from===Se[t][i].square&&this._castling[t]&Se[t][i].flag){this._castling[t]^=Se[t][i].flag;break}}if(this._castling[s]){for(let i=0,o=Se[s].length;i<o;i++)if(e.to===Se[s][i].square&&this._castling[s]&Se[s][i].flag){this._castling[s]^=Se[s][i].flag;break}}e.flags&L.BIG_PAWN?t===_e?this._epSquare=e.to-16:this._epSquare=e.to+16:this._epSquare=ce,e.piece===J?this._halfMoves=0:e.flags&(L.CAPTURE|L.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,t===_e&&this._moveNumber++,this._turn=s}undo(){const e=this._undoMove();return e?this._makePretty(e):null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;const t=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber;const s=this._turn,i=Be(s);if(this._board[t.from]=this._board[t.to],this._board[t.from].type=t.piece,delete this._board[t.to],t.captured)if(t.flags&L.EP_CAPTURE){let o;s===_e?o=t.to-16:o=t.to+16,this._board[o]={type:J,color:i}}else this._board[t.to]={type:t.captured,color:i};if(t.flags&(L.KSIDE_CASTLE|L.QSIDE_CASTLE)){let o,r;t.flags&L.KSIDE_CASTLE?(o=t.to+1,r=t.to-1):(o=t.to-2,r=t.to+1),this._board[o]=this._board[r],delete this._board[r]}return t}pgn({newline:e=`
`,maxWidth:t=0}={}){const s=[];let i=!1;for(const f in this._header)s.push("["+f+' "'+this._header[f]+'"]'+e),i=!0;i&&this._history.length&&s.push(e);const o=f=>{const m=this._comments[this.fen()];if(typeof m<"u"){const h=f.length>0?" ":"";f=`${f}${h}{${m}}`}return f},r=[];for(;this._history.length>0;)r.push(this._undoMove());const l=[];let a="";for(r.length===0&&l.push(o(""));r.length>0;){a=o(a);const f=r.pop();if(!f)break;if(!this._history.length&&f.color==="b"){const m=`${this._moveNumber}. ...`;a=a?`${a} ${m}`:m}else f.color==="w"&&(a.length&&l.push(a),a=this._moveNumber+".");a=a+" "+this._moveToSan(f,this._moves({legal:!0})),this._makeMove(f)}if(a.length&&l.push(o(a)),typeof this._header.Result<"u"&&l.push(this._header.Result),t===0)return s.join("")+l.join(" ");const c=function(){return s.length>0&&s[s.length-1]===" "?(s.pop(),!0):!1},u=function(f,m){for(const h of m.split(" "))if(h){if(f+h.length>t){for(;c();)f--;s.push(e),f=0}s.push(h),f+=h.length,s.push(" "),f++}return c()&&f--,f};let _=0;for(let f=0;f<l.length;f++){if(_+l[f].length>t&&l[f].includes("{")){_=u(_,l[f]);continue}_+l[f].length>t&&f!==0?(s[s.length-1]===" "&&s.pop(),s.push(e),_=0):f!==0&&(s.push(" "),_++),s.push(l[f]),_+=l[f].length}return s.join("")}header(...e){for(let t=0;t<e.length;t+=2)typeof e[t]=="string"&&typeof e[t+1]=="string"&&(this._header[e[t]]=e[t+1]);return this._header}loadPgn(e,{strict:t=!1,newlineChar:s=`\r?
`}={}){function i(y){return y.replace(/\\/g,"\\")}function o(y){const I={},M=y.split(new RegExp(i(s)));let E="",C="";for(let N=0;N<M.length;N++){const O=/^\s*\[\s*([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;E=M[N].replace(O,"$1"),C=M[N].replace(O,"$2"),E.trim().length>0&&(I[E]=C)}return I}e=e.trim();const l=new RegExp("^(\\[((?:"+i(s)+")|.)*\\])((?:\\s*"+i(s)+"){2}|(?:\\s*"+i(s)+")*$)").exec(e),a=l&&l.length>=2?l[1]:"";this.reset();const c=o(a);let u="";for(const y in c)y.toLowerCase()==="fen"&&(u=c[y]),this.header(y,c[y]);if(!t)u&&this.load(u,!0);else if(c.SetUp==="1"){if(!("FEN"in c))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(c.FEN,!0)}function _(y){return Array.from(y).map(function(I){return I.charCodeAt(0)<128?I.charCodeAt(0).toString(16):encodeURIComponent(I).replace(/%/g,"").toLowerCase()}).join("")}function f(y){return y.length==0?"":decodeURIComponent("%"+(y.match(/.{1,2}/g)||[]).join("%"))}const m=function(y){return y=y.replace(new RegExp(i(s),"g")," "),`{${_(y.slice(1,y.length-1))}}`},h=function(y){if(y.startsWith("{")&&y.endsWith("}"))return f(y.slice(1,y.length-1))};let d=e.replace(a,"").replace(new RegExp(`({[^}]*})+?|;([^${i(s)}]*)`,"g"),function(y,I,M){return I!==void 0?m(I):" "+m(`{${M.slice(1)}}`)}).replace(new RegExp(i(s),"g")," ");const p=/(\([^()]+\))+?/g;for(;p.test(d);)d=d.replace(p,"");d=d.replace(/\d+\.(\.\.)?/g,""),d=d.replace(/\.\.\./g,""),d=d.replace(/\$\d+/g,"");let v=d.trim().split(new RegExp(/\s+/));v=v.filter(y=>y!=="");let w="";for(let y=0;y<v.length;y++){const I=h(v[y]);if(I!==void 0){this._comments[this.fen()]=I;continue}const M=this._moveFromSan(v[y],t);if(M==null)if(Cn.indexOf(v[y])>-1)w=v[y];else throw new Error(`Invalid move in PGN: ${v[y]}`);else w="",this._makeMove(M)}w&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",w)}_moveToSan(e,t){let s="";if(e.flags&L.KSIDE_CASTLE)s="O-O";else if(e.flags&L.QSIDE_CASTLE)s="O-O-O";else{if(e.piece!==J){const i=Tn(e,t);s+=e.piece.toUpperCase()+i}e.flags&(L.CAPTURE|L.EP_CAPTURE)&&(e.piece===J&&(s+=ue(e.from)[0]),s+="x"),s+=ue(e.to),e.promotion&&(s+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?s+="#":s+="+"),this._undoMove(),s}_moveFromSan(e,t=!1){const s=_t(e);let i=Ut(s),o=this._moves({legal:!0,piece:i});for(let f=0,m=o.length;f<m;f++)if(s===_t(this._moveToSan(o[f],o)))return o[f];if(t)return null;let r,l,a,c,u,_=!1;if(l=s.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),l?(r=l[1],a=l[2],c=l[3],u=l[4],a.length==1&&(_=!0)):(l=s.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),l&&(r=l[1],a=l[2],c=l[3],u=l[4],a.length==1&&(_=!0))),i=Ut(s),o=this._moves({legal:!0,piece:r||i}),!c)return null;for(let f=0,m=o.length;f<m;f++)if(a){if((!r||r.toLowerCase()==o[f].piece)&&R[a]==o[f].from&&R[c]==o[f].to&&(!u||u.toLowerCase()==o[f].promotion))return o[f];if(_){const h=ue(o[f].from);if((!r||r.toLowerCase()==o[f].piece)&&R[c]==o[f].to&&(a==h[0]||a==h[1])&&(!u||u.toLowerCase()==o[f].promotion))return o[f]}}else if(s===_t(this._moveToSan(o[f],o)).replace("x",""))return o[f];return null}ascii(){let e=`   +------------------------+
`;for(let t=R.a8;t<=R.h1;t++){if(Ye(t)===0&&(e+=" "+"87654321"[Ie(t)]+" |"),this._board[t]){const s=this._board[t].type,o=this._board[t].color===ee?s.toUpperCase():s.toLowerCase();e+=" "+o+" "}else e+=" . ";t+1&136&&(e+=`|
`,t+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const t=this._moves({legal:!1});let s=0;const i=this._turn;for(let o=0,r=t.length;o<r;o++)this._makeMove(t[o]),this._isKingAttacked(i)||(e-1>0?s+=this.perft(e-1):s++),this._undoMove();return s}_makePretty(e){const{color:t,piece:s,from:i,to:o,flags:r,captured:l,promotion:a}=e;let c="";for(const m in L)L[m]&r&&(c+=pn[m]);const u=ue(i),_=ue(o),f={color:t,piece:s,from:u,to:_,san:this._moveToSan(e,this._moves({legal:!0})),flags:c,lan:u+_,before:this.fen(),after:""};return this._makeMove(e),f.after=this.fen(),this._undoMove(),l&&(f.captured=l),a&&(f.promotion=a,f.lan+=a),f}turn(){return this._turn}board(){const e=[];let t=[];for(let s=R.a8;s<=R.h1;s++)this._board[s]==null?t.push(null):t.push({square:ue(s),type:this._board[s].type,color:this._board[s].color}),s+1&136&&(e.push(t),t=[],s+=8);return e}squareColor(e){if(e in R){const t=R[e];return(Ie(t)+Ye(t))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const t=[],s=[];for(;this._history.length>0;)t.push(this._undoMove());for(;;){const i=t.pop();if(!i)break;e?s.push(this._makePretty(i)):s.push(this._moveToSan(i,this._moves())),this._makeMove(i)}return s}_pruneComments(){const e=[],t={},s=i=>{i in this._comments&&(t[i]=this._comments[i])};for(;this._history.length>0;)e.push(this._undoMove());for(s(this.fen());;){const i=e.pop();if(!i)break;this._makeMove(i),s(this.fen())}this._comments=t}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const t=this._comments[e];return delete this._comments[e],{fen:e,comment:t}})}setCastlingRights(e,t){for(const i of[Z,Ee])t[i]!==void 0&&(t[i]?this._castling[e]|=Ze[i]:this._castling[e]&=~Ze[i]);this._updateCastlingRights();const s=this.getCastlingRights(e);return(t[Z]===void 0||t[Z]===s[Z])&&(t[Ee]===void 0||t[Ee]===s[Ee])}getCastlingRights(e){return{[Z]:(this._castling[e]&Ze[Z])!==0,[Ee]:(this._castling[e]&Ze[Ee])!==0}}moveNumber(){return this._moveNumber}}const In="../pieces/Chess_kdt45.svg",Mn="../pieces/Chess_qdt45.svg",An="../pieces/Chess_rdt45.svg",Dn="../pieces/Chess_bdt45.svg",Ln="../pieces/Chess_ndt45.svg",On="../pieces/Chess_pdt45.svg",Nn="../pieces/Chess_klt45.svg",Rn="../pieces/Chess_qlt45.svg",qn="../pieces/Chess_rlt45.svg",zn="../pieces/Chess_blt45.svg",Hn="../pieces/Chess_nlt45.svg",Kn="../pieces/Chess_plt45.svg",jn="http://images.chesscomfiles.com/chess-themes/sounds/_MP3_/default/move-self.mp3",Fn="http://images.chesscomfiles.com/chess-themes/sounds/_MP3_/default/capture.mp3",We={kb:In,qb:Mn,rb:An,bb:Dn,nb:Ln,pb:On,kw:Nn,qw:Rn,rw:qn,bw:zn,nw:Hn,pw:Kn,audio_move:jn,audio_capture:Fn};function Qt(n,e,t){const s=n.slice();return s[26]=e[t],s[28]=t,s}function Yt(n,e,t){const s=n.slice();return s[29]=e[t],s[31]=t,s}function Bn(n){let e,t=(n[4]==="b",n[6](n[31],n[28])+""),s;return{c(){e=k("span"),s=G(t),b(e,"class","label-coord svelte-fv5m9e")},m(i,o){D(i,e,o),g(e,s)},p(i,o){o[0]&16&&t!==(t=(i[4]==="b",i[6](i[31],i[28])+""))&&ge(s,t)},d(i){i&&A(e)}}}function Wt(n){let e,t,s,i,o,r;return{c(){e=k("img"),Ce(e.src,t=We[n[29].type+n[29].color])||b(e,"src",t),b(e,"data-square",`${n[31]}${n[28]}`),b(e,"alt",""),b(e,"class",s="piece "+((n[0].isCheck()||n[0].isCheckmate())&&n[29].type==="k"&&n[29].color===n[5]?"check-shadow":"")+" "+(n[5]===n[29].color&&!n[1]?"draggable":"")+" svelte-fv5m9e"),b(e,"draggable",i=n[5]===n[29].color&&!n[1])},m(l,a){D(l,e,a),o||(r=[U(e,"dragstart",n[7]),U(e,"dragend",Un)],o=!0)},p(l,a){a[0]&8&&!Ce(e.src,t=We[l[29].type+l[29].color])&&b(e,"src",t),a[0]&43&&s!==(s="piece "+((l[0].isCheck()||l[0].isCheckmate())&&l[29].type==="k"&&l[29].color===l[5]?"check-shadow":"")+" "+(l[5]===l[29].color&&!l[1]?"draggable":"")+" svelte-fv5m9e")&&b(e,"class",s),a[0]&42&&i!==(i=l[5]===l[29].color&&!l[1])&&b(e,"draggable",i)},d(l){l&&A(e),o=!1,me(r)}}}function Xt(n){let e,t,s,i,o,r,l=(n[28]===7||n[31]===7)&&Bn(n),a=n[29]&&Wt(n);return{c(){e=k("div"),l&&l.c(),t=T(),a&&a.c(),s=T(),b(e,"class",i="square square-"+n[2]+" "+kt(n[31],n[28])+" svelte-fv5m9e"),b(e,"data-square",`${n[31]}${n[28]}`)},m(c,u){D(c,e,u),l&&l.m(e,null),g(e,t),a&&a.m(e,null),g(e,s),o||(r=[U(e,"dragover",Qn),U(e,"drop",n[8])],o=!0)},p(c,u){(c[28]===7||c[31]===7)&&l.p(c,u),c[29]?a?a.p(c,u):(a=Wt(c),a.c(),a.m(e,s)):a&&(a.d(1),a=null),u[0]&4&&i!==(i="square square-"+c[2]+" "+kt(c[31],c[28])+" svelte-fv5m9e")&&b(e,"class",i)},d(c){c&&A(e),l&&l.d(),a&&a.d(),o=!1,me(r)}}}function Jt(n){let e,t=n[26],s=[];for(let i=0;i<t.length;i+=1)s[i]=Xt(Yt(n,t,i));return{c(){for(let i=0;i<s.length;i+=1)s[i].c();e=je()},m(i,o){for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(i,o);D(i,e,o)},p(i,o){if(o[0]&511){t=i[26];let r;for(r=0;r<t.length;r+=1){const l=Yt(i,t,r);s[r]?s[r].p(l,o):(s[r]=Xt(l),s[r].c(),s[r].m(e.parentNode,e))}for(;r<s.length;r+=1)s[r].d(1);s.length=t.length}},d(i){Xe(s,i),i&&A(e)}}}function Gn(n){let e,t,s=n[3],i=[];for(let o=0;o<s.length;o+=1)i[o]=Jt(Qt(n,s,o));return{c(){e=k("div"),t=k("div");for(let o=0;o<i.length;o+=1)i[o].c();b(t,"class","chessboard svelte-fv5m9e"),b(e,"class","game-container svelte-fv5m9e")},m(o,r){D(o,e,r),g(e,t);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(t,null)},p(o,r){if(r[0]&511){s=o[3];let l;for(l=0;l<s.length;l+=1){const a=Qt(o,s,l);i[l]?i[l].p(a,r):(i[l]=Jt(a),i[l].c(),i[l].m(t,null))}for(;l<i.length;l+=1)i[l].d(1);i.length=s.length}},i:q,o:q,d(o){o&&A(e),Xe(i,o)}}}function kt(n,e){return(n+e)%2===0?"light":"dark"}function Un(n){n.target.style.opacity=1}function Qn(n){n.preventDefault()}function Yn(n,e,t){let{pgn:s=null}=e,{fen:i=null}=e,{key:o=Math.random().toString(36).substring(7)}=e,{correctPuzzleMove:r=null}=e,{reset:l=!1}=e,{isGameStopped:a=!1}=e,{chess:c=new nt}=e,{history:u=[]}=e;function _(S,P){try{const F=c.move({from:S,to:P,promotion:"q"});t(3,d=c.board()),t(9,i=c.fen()),t(5,p=c.turn());const Y=document.querySelectorAll(`.square-${o}`);return h&&O(Y,[h.from,h.to],"remove"),h=c.history({verbose:!0}).slice(-1)[0],O(Y,[h.from,h.to]),v==="b"&&t(3,d=d.map(se=>se.reverse()).reverse()),y.play(),1}catch{return 0}}function f(){c.reset(),t(3,d=c.board()),t(9,i=c.fen()),t(5,p=c.turn()),t(11,u=[]),h=null,M(),v==="b"&&t(3,d=d.map(S=>S.reverse()).reverse())}function m(){t(4,v=v==="w"?"b":"w"),t(3,d=d.map(S=>S.reverse()).reverse())}if(s&&i)throw new Error("You can only pass one of pgn or fen");let h=null;s?(c.loadPgn(s),u=c.history(),h=c.history({verbose:!0}).slice(-1)[0]):i&&c.load(i);let d=c.board(),p=c.turn(),v=p;v==="b"&&(d=d.map(S=>S.reverse()).reverse());let w=null;const y=new Audio(We.audio_move);function I(){const S=document.querySelectorAll(`.square-${o}`);h&&O(S,[h.from,h.to],"remove"),t(0,c=new nt),h=null,t(3,d=[]),t(9,i=null),t(5,p=null),t(4,v=null),w=null,y.pause(),y.currentTime=0,t(1,a=!1),s?(c.loadPgn(s),h=c.history({verbose:!0}).slice(-1)[0]):i&&c.load(i),t(3,d=c.board()),t(5,p=c.turn()),t(4,v=p),v==="b"&&t(3,d=d.map(P=>P.reverse()).reverse()),O(S,[h==null?void 0:h.from,h==null?void 0:h.to])}const M=()=>{const S=document.querySelectorAll(`.square-${o}`);for(let P=0;P<S.length;P++)S[P].classList.remove("light-highlighted"),S[P].classList.remove("dark-highlighted")},E=S=>{let P=S.charCodeAt(0)-97,F=8-parseInt(S[1]);return v==="b"&&(P=7-P,F=7-F),[P,F]};function C(S,P){return v==="b"&&(S=7-S,P=7-P),String.fromCharCode(97+S)+(8-P)}function N(S,P){return P===7?(S=v==="w"?S:7-S,String.fromCharCode(97+S)):(P=v==="w"?P:7-P,8-P)}function O(S,P,F="add"){P.map(Y=>{let[se,fe]=E(Y),Q=8*fe+se,le=kt(se,fe)==="light"?"light-highlighted":"dark-highlighted";F==="add"?S[Q].classList.add(le):S[Q].classList.remove(le)})}function j(S){if(w=C(...S.target.dataset.square.split("").map(P=>parseInt(P))),S.target.style.opacity=0,typeof screen.orientation<"u"){const P=new Image;P.src=S.target.src,P.width=50,S.dataTransfer.setDragImage(P,25,25)}}function re(S){S.preventDefault();const P=w,F=C(...S.target.dataset.square.split("").map(Y=>parseInt(Y)));oe(P,F)}function oe(S,P){const F=_(S,P);if(r&&F){let{isCorrect:Y,isSolved:se,answerSourceSquare:fe,answerTargetSquare:Q}=r(S,P);Y?_(fe,Q):t(1,a=!0),se&&t(1,a=!0)}}return it(()=>{const S=document.querySelectorAll(`.square-${o}`);h&&O(S,[h.from,h.to])}),n.$$set=S=>{"pgn"in S&&t(12,s=S.pgn),"fen"in S&&t(9,i=S.fen),"key"in S&&t(2,o=S.key),"correctPuzzleMove"in S&&t(13,r=S.correctPuzzleMove),"reset"in S&&t(10,l=S.reset),"isGameStopped"in S&&t(1,a=S.isGameStopped),"chess"in S&&t(0,c=S.chess),"history"in S&&t(11,u=S.history)},n.$$.update=()=>{n.$$.dirty[0]&3609&&(l&&(I(),t(10,l=!1)),c&&(t(11,u=u.concat(c.history())),t(0,c),t(10,l),t(11,u),t(9,i),t(4,v),t(3,d)),i&&(c.load(i),t(3,d=c.board()),v==="b"&&t(3,d=d.map(S=>S.reverse()).reverse()),t(5,p=c.turn())))},[c,a,o,d,v,p,N,j,re,i,l,u,s,r,_,f,m]}class ks extends ie{constructor(e){super(),ne(this,e,Yn,Gn,te,{pgn:12,fen:9,key:2,correctPuzzleMove:13,reset:10,isGameStopped:1,chess:0,history:11,makeMove:14,restartGame:15,flipBoard:16},null,[-1,-1])}get makeMove(){return this.$$.ctx[14]}get restartGame(){return this.$$.ctx[15]}get flipBoard(){return this.$$.ctx[16]}}function Zt(n){let e,t,s,i,o,r,l,a,c=n[7][n[3]]+"",u,_;return{c(){e=k("img"),s=T(),i=k("div"),o=k("span"),o.textContent="Your Turn",r=T(),l=k("span"),a=G("Find the best move for "),u=G(c),_=G("."),Ce(e.src,t=We["k"+n[3]])||b(e,"src",t),b(e,"alt","king"),b(e,"class","size-piece svelte-14n38d0"),b(o,"class","text-title svelte-14n38d0"),b(l,"class","text-description"),b(i,"class","text svelte-14n38d0")},m(f,m){D(f,e,m),D(f,s,m),D(f,i,m),g(i,o),g(i,r),g(i,l),g(l,a),g(l,u),g(l,_)},p(f,m){m&8&&!Ce(e.src,t=We["k"+f[3]])&&b(e,"src",t),m&8&&c!==(c=f[7][f[3]]+"")&&ge(u,c)},d(f){f&&A(e),f&&A(s),f&&A(i)}}}function Vt(n){let e,t,s,i;function o(a,c){return a[6].length===0?Xn:Wn}let r=o(n),l=r(n);return{c(){l.c(),e=T(),t=k("button"),t.textContent="Retry"},m(a,c){l.m(a,c),D(a,e,c),D(a,t,c),s||(i=U(t,"click",n[11]),s=!0)},p(a,c){r!==(r=o(a))&&(l.d(1),l=r(a),l&&(l.c(),l.m(e.parentNode,e)))},d(a){l.d(a),a&&A(e),a&&A(t),s=!1,i()}}}function Wn(n){let e,t;return{c(){e=k("i"),t=G(`\r
          Wrong move, try again!`),b(e,"class","fas fa-times svelte-14n38d0"),ke(e,"color","#c33")},m(s,i){D(s,e,i),D(s,t,i)},d(s){s&&A(e),s&&A(t)}}}function Xn(n){let e,t;return{c(){e=k("i"),t=G(`\r
          Well Done, you solved the puzzle!`),b(e,"class","fas fa-check svelte-14n38d0"),ke(e,"color","#629924")},m(s,i){D(s,e,i),D(s,t,i)},d(s){s&&A(e),s&&A(t)}}}function Jn(n){let e,t,s,i,o,r,l,a,c;function u(d){n[9](d)}function _(d){n[10](d)}let f={correctPuzzleMove:n[8],pgn:n[0],key:n[1]};n[4]!==void 0&&(f.reset=n[4]),n[5]!==void 0&&(f.isGameStopped=n[5]),t=new ks({props:f}),Ae.push(()=>tt(t,"reset",u)),Ae.push(()=>tt(t,"isGameStopped",_));let m=!n[5]&&Zt(n),h=n[5]&&Vt(n);return{c(){e=k("div"),$(t.$$.fragment),o=T(),r=k("div"),m&&m.c(),l=T(),a=k("div"),h&&h.c(),b(a,"class","message svelte-14n38d0"),b(r,"class","modal svelte-14n38d0"),b(e,"class","game-container svelte-14n38d0")},m(d,p){D(d,e,p),V(t,e,null),g(e,o),g(e,r),m&&m.m(r,null),g(r,l),g(r,a),h&&h.m(a,null),c=!0},p(d,[p]){const v={};p&1&&(v.pgn=d[0]),p&2&&(v.key=d[1]),!s&&p&16&&(s=!0,v.reset=d[4],et(()=>s=!1)),!i&&p&32&&(i=!0,v.isGameStopped=d[5],et(()=>i=!1)),t.$set(v),d[5]?m&&(m.d(1),m=null):m?m.p(d,p):(m=Zt(d),m.c(),m.m(r,l)),d[5]?h?h.p(d,p):(h=Vt(d),h.c(),h.m(a,null)):h&&(h.d(1),h=null)},i(d){c||(H(t.$$.fragment,d),c=!0)},o(d){K(t.$$.fragment,d),c=!1},d(d){d&&A(e),x(t),m&&m.d(),h&&h.d()}}}function Zn(n,e,t){let{pgn:s=null}=e,{key:i=Math.random().toString(36).substring(7)}=e,{solution:o}=e,r=new nt,l=r.turn();s&&(r.loadPgn(s),l=r.turn());let a=!1,c=!1,u=o.slice();const _={w:"white",b:"black"};function f(p,v){if(p+v===u[0]){u.shift();let w;return u.length>0?w=u.shift():w="null",{isCorrect:!0,isSolved:!(u.length>0),answerSourceSquare:w.slice(0,2),answerTargetSquare:w.slice(2,4)}}else return{isCorrect:!1}}function m(p){a=p,t(4,a)}function h(p){c=p,t(5,c)}const d=()=>{t(4,a=!0),t(6,u=o.slice())};return n.$$set=p=>{"pgn"in p&&t(0,s=p.pgn),"key"in p&&t(1,i=p.key),"solution"in p&&t(2,o=p.solution)},[s,i,o,l,a,c,u,_,f,m,h,d]}class ys extends ie{constructor(e){super(),ne(this,e,Zn,Jn,te,{pgn:0,key:1,solution:2})}}const Vn=localStorage.getItem("content"),Pe=ze(Vn||null);Pe.subscribe(n=>{n!==null?localStorage.setItem("content",n):localStorage.removeItem("content")});function xt(n,e,t){const s=n.slice();return s[11]=e[t],s[13]=t,s}function $t(n,e,t){const s=n.slice();return s[14]=e[t],s}function xn(n){let e;return{c(){e=k("i"),b(e,"class","far fa-heart")},m(t,s){D(t,e,s)},d(t){t&&A(e)}}}function $n(n){let e;return{c(){e=k("i"),b(e,"class","fas fa-heart"),ke(e,"color","red")},m(t,s){D(t,e,s)},d(t){t&&A(e)}}}function es(n){let e,t=n[14]+"",s;return{c(){e=k("span"),s=G(t),b(e,"class","tag svelte-10h0ptf")},m(i,o){D(i,e,o),g(e,s)},p(i,o){o&2&&t!==(t=i[14]+"")&&ge(s,t)},d(i){i&&A(e)}}}function ts(n,e){let t,s,i,o,r=e[11].username+"",l,a,c,u=e[11].description+"",_,f,m,h,d,p,v,w,y,I,M,E=e[11].likes+"",C,N,O,j,re,oe,S,P,F,Y;function se(B,X){return X&6&&(d=null),d==null&&(d=!!B[2].includes(B[11].id)),d?$n:xn}let fe=se(e,-1),Q=fe(e);function le(){return e[5](e[11])}j=new ys({props:{pgn:e[11].pgn,key:e[13].toString(),solution:e[11].puzzle.solution}});let ve=e[11].tags,W=[];for(let B=0;B<ve.length;B+=1)W[B]=es($t(e,ve,B));return{key:n,first:null,c(){t=k("div"),s=k("div"),i=k("section"),o=k("span"),l=G(r),a=T(),c=k("p"),_=G(u),f=T(),m=k("section"),h=k("button"),Q.c(),w=T(),y=k("div"),I=G("+"),M=k("span"),C=G(E),O=T(),$(j.$$.fragment),re=T(),oe=k("div");for(let B=0;B<W.length;B+=1)W[B].c();S=T(),b(o,"class","username svelte-10h0ptf"),b(c,"class","svelte-10h0ptf"),b(i,"class","user-container svelte-10h0ptf"),b(h,"class",p="like-button likes-button-id-"+e[11].id+" svelte-10h0ptf"),h.disabled=v=e[0]===null,b(M,"class",N="number-likes likes-id-"+e[11].id+" svelte-10h0ptf"),b(y,"class","tag svelte-10h0ptf"),b(m,"class","like-section svelte-10h0ptf"),b(s,"class","upper-container svelte-10h0ptf"),b(oe,"class","tags-container svelte-10h0ptf"),b(t,"class","container svelte-10h0ptf"),this.first=t},m(B,X){D(B,t,X),g(t,s),g(s,i),g(i,o),g(o,l),g(i,a),g(i,c),g(c,_),g(s,f),g(s,m),g(m,h),Q.m(h,null),g(m,w),g(m,y),g(y,I),g(y,M),g(M,C),g(t,O),V(j,t,null),g(t,re),g(t,oe);for(let ae=0;ae<W.length;ae+=1)W[ae]&&W[ae].m(oe,null);g(t,S),P=!0,F||(Y=U(h,"click",le),F=!0)},p(B,X){e=B,(!P||X&2)&&r!==(r=e[11].username+"")&&ge(l,r),(!P||X&2)&&u!==(u=e[11].description+"")&&ge(_,u),fe!==(fe=se(e,X))&&(Q.d(1),Q=fe(e),Q&&(Q.c(),Q.m(h,null))),(!P||X&2&&p!==(p="like-button likes-button-id-"+e[11].id+" svelte-10h0ptf"))&&b(h,"class",p),(!P||X&1&&v!==(v=e[0]===null))&&(h.disabled=v),(!P||X&2)&&E!==(E=e[11].likes+"")&&ge(C,E),(!P||X&2&&N!==(N="number-likes likes-id-"+e[11].id+" svelte-10h0ptf"))&&b(M,"class",N);const ae={};if(X&2&&(ae.pgn=e[11].pgn),X&2&&(ae.key=e[13].toString()),X&2&&(ae.solution=e[11].puzzle.solution),j.$set(ae),X&2){ve=e[11].tags;let z;for(z=0;z<ve.length;z+=1){const he=$t(e,ve,z);W[z]?W[z].p(he,X):(W[z]=es(he),W[z].c(),W[z].m(oe,null))}for(;z<W.length;z+=1)W[z].d(1);W.length=ve.length}},i(B){P||(H(j.$$.fragment,B),P=!0)},o(B){K(j.$$.fragment,B),P=!1},d(B){B&&A(t),Q.d(),x(j),Xe(W,B),F=!1,Y()}}}function ei(n){let e,t=[],s=new Map,i,o=n[1];const r=l=>l[11].id;for(let l=0;l<o.length;l+=1){let a=xt(n,o,l),c=r(a);s.set(c,t[l]=ts(c,a))}return{c(){e=k("main");for(let l=0;l<t.length;l+=1)t[l].c();b(e,"class","svelte-10h0ptf")},m(l,a){D(l,e,a);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);i=!0},p(l,[a]){a&15&&(o=l[1],De(),t=zs(t,a,r,1,l,o,s,e,qs,ts,null,xt),Le())},i(l){if(!i){for(let a=0;a<o.length;a+=1)H(t[a]);i=!0}},o(l){for(let a=0;a<t.length;a+=1)K(t[a]);i=!1},d(l){l&&A(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function ti(n,e,t){let s;pe(n,Pe,h=>t(0,s=h));let i=[],o=localStorage.getItem("userId"),r=[];o&&a(o);async function l(){const h=await fetch("https://sveltebackendv2.onrender.com/posts");t(1,i=await h.json()),t(1,i=i.reverse())}l();async function a(h){const d=await fetch(`https://sveltebackendv2.onrender.com/posts/likes/${h}`),p=await d.json();d.status===200?t(2,r=p):(console.log("Error: "+d.status),t(2,r=[]))}async function c(h){(await fetch(`https://sveltebackendv2.onrender.com/posts/${h}/unlike`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({userId:parseInt(o)})})).status===200?console.log("disliked"):console.log("error")}async function u(h){(await fetch(`https://sveltebackendv2.onrender.com/posts/${h}/like`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({userId:parseInt(o)})})).status===200?console.log("like"):console.log("error")}function _(h,d){const p=document.querySelector(`.likes-id-${h}`),v=document.querySelector(`.likes-button-id-${h}`);if(d==="down"){r.splice(r.indexOf(h),1),p.innerHTML=(parseInt(p.innerHTML)-1).toString(),v.innerHTML='<i class="far fa-heart"></i>';return}r.push(h),p.innerHTML=(parseInt(p.innerHTML)+1).toString(),v.innerHTML='<i class="fas fa-heart" style="color:red;"></i>'}function f(h){r.includes(h)?(_(h,"down"),c(h)):(_(h,"up"),u(h))}const m=h=>f(h.id);return n.$$.update=()=>{n.$$.dirty&17&&(s&&(t(4,o=localStorage.getItem("userId")),a(o),l()),s===null&&(t(4,o=null),t(2,r=[]),l()))},[s,i,r,f,o,m]}class si extends ie{constructor(e){super(),ne(this,e,ti,ei,te,{})}}const ni=["00008","0000D","0009B","000Vc","000Zo","000aY","000hf","000mr","000rO","000tp","00143","0018S","001Wz","001XA","001gi","001h8","001om","001u3","001wb","001wr","001xO","001xl","00206","002CP","002Cw","002E4","002IE","002KJ","002LW","002O7","00G0z","00Fyu","00FPo","00FON"],ss={puzzleIds:ni};function ns(n,e,t){const s=n.slice();return s[7]=e[t],s}function ii(n){let e,t,s,i,o,r,l,a;e=new ys({props:{pgn:n[1],key:n[0].toString(),solution:n[2]}});let c=n[3],u=[];for(let _=0;_<c.length;_+=1)u[_]=is(ns(n,c,_));return{c(){$(e.$$.fragment),t=T(),s=k("div");for(let _=0;_<u.length;_+=1)u[_].c();i=T(),o=k("button"),o.textContent="Get Other Puzzle",b(o,"class","button-random svelte-1url0vv"),b(s,"class","tags-container svelte-1url0vv")},m(_,f){V(e,_,f),D(_,t,f),D(_,s,f);for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(s,null);g(s,i),g(s,o),r=!0,l||(a=U(o,"click",n[4]),l=!0)},p(_,f){const m={};if(f&2&&(m.pgn=_[1]),f&1&&(m.key=_[0].toString()),f&4&&(m.solution=_[2]),e.$set(m),f&8){c=_[3];let h;for(h=0;h<c.length;h+=1){const d=ns(_,c,h);u[h]?u[h].p(d,f):(u[h]=is(d),u[h].c(),u[h].m(s,i))}for(;h<u.length;h+=1)u[h].d(1);u.length=c.length}},i(_){r||(H(e.$$.fragment,_),r=!0)},o(_){K(e.$$.fragment,_),r=!1},d(_){x(e,_),_&&A(t),_&&A(s),Xe(u,_),l=!1,a()}}}function oi(n){let e;return{c(){e=k("div"),b(e,"class","loading-spinner svelte-1url0vv")},m(t,s){D(t,e,s)},p:q,i:q,o:q,d(t){t&&A(e)}}}function is(n){let e,t=n[7]+"",s;return{c(){e=k("span"),s=G(t),b(e,"class","tag svelte-1url0vv")},m(i,o){D(i,e,o),g(e,s)},p(i,o){o&8&&t!==(t=i[7]+"")&&ge(s,t)},d(i){i&&A(e)}}}function ri(n){let e,t,s,i,o,r;const l=[oi,ii],a=[];function c(u,_){return u[1]===""?0:1}return i=c(n),o=a[i]=l[i](n),{c(){e=k("main"),t=k("div"),s=k("div"),o.c(),b(s,"class","container svelte-1url0vv"),b(e,"class","svelte-1url0vv")},m(u,_){D(u,e,_),g(e,t),g(t,s),a[i].m(s,null),r=!0},p(u,[_]){let f=i;i=c(u),i===f?a[i].p(u,_):(De(),K(a[f],1,1,()=>{a[f]=null}),Le(),o=a[i],o?o.p(u,_):(o=a[i]=l[i](u),o.c()),H(o,1),o.m(s,null))},i(u){r||(H(o),r=!0)},o(u){K(o),r=!1},d(u){u&&A(e),a[i].d()}}}function li(n,e,t){let s,i=[],o="",r="",l=[];async function a(){t(0,s=ss.puzzleIds[Math.floor(Math.random()*ss.puzzleIds.length)]),i=await(await fetch(`https://lichess.org/api/puzzle/${s}`)).json(),t(1,o=i.game.pgn),t(2,r=i.puzzle.solution),t(3,l=i.puzzle.themes)}function c(){i=[],t(3,l=[]),t(1,o=""),t(2,r=""),a()}return it(async()=>{await a()}),[s,o,r,l,c]}class ai extends ie{constructor(e){super(),ne(this,e,li,ri,te,{})}}function ci(n){let e,t,s,i,o,r,l,a,c,u,_,f,m,h,d,p,v,w;return{c(){e=k("form"),t=k("div"),s=k("label"),s.innerHTML=`<i class="fas fa-user"></i>
      Username`,i=T(),o=k("input"),r=T(),l=k("div"),a=k("label"),a.innerHTML=`<i class="fas fa-lock"></i>
      Password`,c=T(),u=k("input"),_=T(),f=k("button"),f.textContent="Login",m=T(),h=k("div"),d=k("small"),p=G(n[2]),b(s,"for","username"),b(s,"class","svelte-xl46mg"),b(o,"id","username"),b(t,"class","box svelte-xl46mg"),b(a,"for","password"),b(a,"class","svelte-xl46mg"),b(u,"type","password"),b(u,"id","password"),b(l,"class","box svelte-xl46mg"),b(f,"type","submit"),b(f,"class","svelte-xl46mg"),b(h,"id","error_message"),b(h,"class","svelte-xl46mg"),b(e,"class","flex mx-auto col-6 svelte-xl46mg")},m(y,I){D(y,e,I),g(e,t),g(t,s),g(t,i),g(t,o),de(o,n[0]),g(e,r),g(e,l),g(l,a),g(l,c),g(l,u),de(u,n[1]),g(e,_),g(e,f),g(e,m),g(e,h),g(h,d),g(d,p),v||(w=[U(o,"input",n[4]),U(u,"input",n[5]),U(e,"submit",_s(n[3]))],v=!0)},p(y,[I]){I&1&&o.value!==y[0]&&de(o,y[0]),I&2&&u.value!==y[1]&&de(u,y[1]),I&4&&ge(p,y[2])},i:q,o:q,d(y){y&&A(e),v=!1,me(w)}}}function ui(n,e,t){let s;pe(n,Pe,_=>t(6,s=_));let i="",o="",r="";async function l(){const _=await fetch("https://sveltebackendv2.onrender.com/users/login",{method:"POST",headers:{Accept:"*/*","Content-Type":"application/json"},body:JSON.stringify({username:i,password:o})});_.status===200?(a(_),Tt("/")):t(2,r="Bad username or password")}async function a(_){const f=await _.json();localStorage.setItem("userId",f.user.id),hs(Pe,s=i,s)}function c(){i=this.value,t(0,i)}function u(){o=this.value,t(1,o)}return[i,o,r,l,c,u]}class fi extends ie{constructor(e){super(),ne(this,e,ui,ci,te,{})}}function hi(n){let e,t;return e=new fi({}),{c(){$(e.$$.fragment)},m(s,i){V(e,s,i),t=!0},p:q,i(s){t||(H(e.$$.fragment,s),t=!0)},o(s){K(e.$$.fragment,s),t=!1},d(s){x(e,s)}}}class _i extends ie{constructor(e){super(),ne(this,e,null,hi,te,{})}}function os(n,e,t){const s=n.slice();return s[7]=e[t],s[9]=t,s}function rs(n){let e,t,s=n[9]+1+"",i,o,r,l=n[7].white+"",a,c,u,_=n[7].black+"",f,m;return{c(){e=k("tr"),t=k("td"),i=G(s),o=T(),r=k("td"),a=G(l),c=T(),u=k("td"),f=G(_),m=T(),b(t,"class","td-num svelte-up0iew"),b(r,"class","td-move svelte-up0iew"),b(u,"class","td-move svelte-up0iew")},m(h,d){D(h,e,d),g(e,t),g(t,i),g(e,o),g(e,r),g(r,a),g(e,c),g(e,u),g(u,f),g(e,m)},p(h,d){d&1&&l!==(l=h[7].white+"")&&ge(a,l),d&1&&_!==(_=h[7].black+"")&&ge(f,_)},d(h){h&&A(e)}}}function di(n){let e,t,s,i,o,r,l,a=n[0],c=[];for(let u=0;u<a.length;u+=1)c[u]=rs(os(n,a,u));return{c(){e=k("div"),t=k("table"),s=k("tbody");for(let u=0;u<c.length;u+=1)c[u].c();i=T(),o=k("button"),o.innerHTML=`<i class="fas fa-copy"></i>
    Copy PGN to Clipboard`,b(t,"class","svelte-up0iew"),b(o,"class","svelte-up0iew"),b(e,"class","moves-table svelte-up0iew")},m(u,_){D(u,e,_),g(e,t),g(t,s);for(let f=0;f<c.length;f+=1)c[f]&&c[f].m(s,null);g(e,i),g(e,o),r||(l=U(o,"click",n[1]),r=!0)},p(u,[_]){if(_&1){a=u[0];let f;for(f=0;f<a.length;f+=1){const m=os(u,a,f);c[f]?c[f].p(m,_):(c[f]=rs(m),c[f].c(),c[f].m(s,null))}for(;f<c.length;f+=1)c[f].d(1);c.length=a.length}},i:q,o:q,d(u){u&&A(e),Xe(c,u),r=!1,l()}}}let pi=`[White "Player"]
[Black "Stockfish (depth 10)"]
`;function ls(n){let e="";for(let t=0;t<n.length;t++)t%2===0&&(e+=`${Math.floor(t/2)+1}. `),e+=`${n[t]} `;return e}function gi(n,e,t){let{history:s=[]}=e,i=[],o="";const r={N:"♞",B:"♝",R:"♜",Q:"♛",K:"♚",P:"♟"};function l(u){let _=[];for(let f=0;f<u.length;f+=2){let m={white:a(u[f]),black:a(u[f+1])};_.push(m)}return _}function a(u){if(u===void 0)return"";if(u.length===2||u[0]==="O")return u;let _="";for(let f=0;f<u.length;f++)r[u[f]]?_+=r[u[f]]:_+=u[f];return _}function c(){navigator.clipboard.writeText(pi+o)}return it(()=>{t(0,i=l(s)),o=ls(s)}),n.$$set=u=>{"history"in u&&t(2,s=u.history)},n.$$.update=()=>{n.$$.dirty&4&&(t(0,i=l(s)),o=ls(s))},[i,c,s]}class mi extends ie{constructor(e){super(),ne(this,e,gi,di,te,{history:2})}}const bi="/assets/stockfish_img-f07d564a.png",vi="/assets/wasm-9130f911.png",ki="/assets/win-465c14eb.gif",yi="/assets/loss-49efbb9b.gif",Si="/assets/draw-b3ea80be.gif";function wi(n){let e,t,s,i,o,r,l,a,c,u,_,f,m,h=n[3].title+"",d,p,v,w=n[3].text+"",y,I,M,E,C,N,O,j,re,oe,S,P,F,Y,se,fe,Q,le,ve,W;function B(z){n[8](z)}function X(z){n[9](z)}let ae={};return n[0]!==void 0&&(ae.chess=n[0]),n[2]!==void 0&&(ae.history=n[2]),O=new ks({props:ae}),n[7](O),Ae.push(()=>tt(O,"chess",B)),Ae.push(()=>tt(O,"history",X)),P=new mi({props:{history:n[2]}}),{c(){e=k("div"),t=k("div"),s=k("img"),o=T(),r=k("span"),r.innerHTML=`<b>Stockfish</b> 
      <span class="tag svelte-f801aj">&gt;3500 Elo</span>
      with`,l=T(),a=k("img"),u=T(),_=k("div"),f=k("div"),m=k("h3"),d=G(h),p=T(),v=k("p"),y=G(w),I=T(),M=k("img"),N=T(),$(O.$$.fragment),oe=T(),S=k("div"),$(P.$$.fragment),F=T(),Y=k("div"),se=k("button"),se.innerHTML=`<i class="fas fa-undo"></i>
        Restart as White`,fe=T(),Q=k("button"),Q.innerHTML=`<i class="fas fa-undo"></i>
        Restart as Black`,Ce(s.src,i=bi)||b(s,"src",i),b(s,"alt","stockfish"),b(s,"width","50px"),b(s,"height","50px"),b(s,"class","svelte-f801aj"),Ce(a.src,c=vi)||b(a,"src",c),b(a,"alt","wasm"),b(a,"width","40px"),b(a,"height","40px"),b(a,"class","svelte-f801aj"),b(t,"class","name-opponent svelte-f801aj"),Ce(M.src,E=n[3].src)||b(M,"src",E),b(M,"alt","gif"),b(M,"class","overlay-gif svelte-f801aj"),b(f,"class",C="overlay-content "+(n[4]?"":"hidden")+" svelte-f801aj"),b(_,"class","overlay svelte-f801aj"),b(se,"class","svelte-f801aj"),b(Q,"class","svelte-f801aj"),b(Y,"class","buttons-restart svelte-f801aj"),b(S,"class","bottom-section svelte-f801aj"),b(e,"class","container svelte-f801aj")},m(z,he){D(z,e,he),g(e,t),g(t,s),g(t,o),g(t,r),g(t,l),g(t,a),g(e,u),g(e,_),g(_,f),g(f,m),g(m,d),g(f,p),g(f,v),g(v,y),g(f,I),g(f,M),g(e,N),V(O,e,null),g(e,oe),g(e,S),V(P,S,null),g(S,F),g(S,Y),g(Y,se),g(Y,fe),g(Y,Q),le=!0,ve||(W=[U(se,"click",n[10]),U(Q,"click",n[11])],ve=!0)},p(z,[he]){(!le||he&8)&&h!==(h=z[3].title+"")&&ge(d,h),(!le||he&8)&&w!==(w=z[3].text+"")&&ge(y,w),(!le||he&8&&!Ce(M.src,E=z[3].src))&&b(M,"src",E),(!le||he&16&&C!==(C="overlay-content "+(z[4]?"":"hidden")+" svelte-f801aj"))&&b(f,"class",C);const ot={};!j&&he&1&&(j=!0,ot.chess=z[0],et(()=>j=!1)),!re&&he&4&&(re=!0,ot.history=z[2],et(()=>re=!1)),O.$set(ot);const It={};he&4&&(It.history=z[2]),P.$set(It)},i(z){le||(H(O.$$.fragment,z),H(P.$$.fragment,z),le=!0)},o(z){K(O.$$.fragment,z),K(P.$$.fragment,z),le=!1},d(z){z&&A(e),n[7](null),x(O),x(P),ve=!1,me(W)}}}const Ei="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";function Ci(n,e,t){let s,i=new nt(Ei),o=i.history(),r=i.turn();const l={draw:{title:"Draw!",text:"The game ended in a draw. You can do better.",src:Si},win:{title:"Check Mate!",text:"Congratulations, you won the game. But remember, this Stockfish does not have his real strength.",src:ki},loss:{title:"Check Mate!",text:"You lost the game. Do better next time.",src:yi}};let a=l.loss,c=!1;function u(w){w!==r&&s.flipBoard(),s.restartGame(),t(4,c=!1),t(6,r=w)}const _=new Worker("stockfish.js");function f(w){_.postMessage("position fen "+w),_.postMessage("go depth 10"),_.postMessage("go movetime 1000")}_.postMessage("uci"),_.postMessage("ucinewgame"),_.postMessage("position startpos"),_.onmessage=w=>{if(w.data.includes("bestmove"))try{const y=w.data.split(" ")[1];s.makeMove(y.slice(0,2),y.slice(2,4))}catch{}};function m(w){Ae[w?"unshift":"push"](()=>{s=w,t(1,s)})}function h(w){i=w,t(0,i)}function d(w){o=w,t(2,o)}const p=()=>u("w"),v=()=>u("b");return n.$$.update=()=>{n.$$.dirty&65&&(!i.isGameOver()&&i.turn()!==r&&f(i.fen()),i.isGameOver()&&(i.isCheckmate()?i.turn()===r?t(3,a=l.loss):t(3,a=l.win):i.isDraw()&&t(3,a=l.draw),t(4,c=!0)))},[i,s,o,a,c,u,r,m,h,d,p,v]}class Pi extends ie{constructor(e){super(),ne(this,e,Ci,wi,te,{})}}function as(n){let e;return{c(){e=k("a"),e.innerHTML=`<i class="fas fa-plus"></i>
        New post`,b(e,"href","/new_post"),b(e,"class","svelte-1cizgls")},m(t,s){D(t,e,s)},d(t){t&&A(e)}}}function Ti(n){let e,t,s;return{c(){e=k("button"),e.innerHTML=`<i class="fas fa-sign-out-alt"></i>
        Logout`,b(e,"class","svelte-1cizgls")},m(i,o){D(i,e,o),t||(s=U(e,"click",n[3]),t=!0)},p:q,d(i){i&&A(e),t=!1,s()}}}function Ii(n){let e;return{c(){e=k("a"),e.innerHTML=`<i class="fas fa-sign-in-alt"></i>
        Login`,b(e,"href","/login"),b(e,"class","svelte-1cizgls")},m(t,s){D(t,e,s)},p:q,d(t){t&&A(e)}}}function Mi(n){let e,t,s,i,o,r,l,a,c,u,_,f,m,h,d,p,v=n[2]&&as();function w(M,E){return M[2]===null?Ii:Ti}let y=w(n),I=y(n);return{c(){e=k("nav"),t=k("div"),s=k("button"),i=k("i"),o=T(),r=k("a"),r.innerHTML='<i class="fas fa-chess"></i> InstaChess',l=T(),a=k("div"),c=k("a"),c.innerHTML=`<i class="fas fa-puzzle-piece"></i>
      Puzzles`,u=T(),_=k("a"),_.innerHTML=`<i class="fas fa-robot"></i>
      Stockfish`,f=T(),v&&v.c(),m=T(),h=k("div"),I.c(),b(i,"class","fas fa-bars"),b(s,"class","navbar-toggle svelte-1cizgls"),ke(s,"display",n[1]),b(r,"href","/"),b(r,"class","svelte-1cizgls"),b(t,"class","navbar-title svelte-1cizgls"),b(c,"href","/puzzles"),b(c,"class","svelte-1cizgls"),b(_,"href","/stockfish"),b(_,"class","svelte-1cizgls"),b(a,"class","navbar-links svelte-1cizgls"),ke(a,"display",n[0]),b(h,"class","navbar-links svelte-1cizgls"),ke(h,"display",n[0]),b(e,"class","navbar svelte-1cizgls")},m(M,E){D(M,e,E),g(e,t),g(t,s),g(s,i),g(t,o),g(t,r),g(e,l),g(e,a),g(a,c),g(a,u),g(a,_),g(a,f),v&&v.m(a,null),g(e,m),g(e,h),I.m(h,null),d||(p=U(s,"click",n[4]),d=!0)},p(M,[E]){E&2&&ke(s,"display",M[1]),M[2]?v||(v=as(),v.c(),v.m(a,null)):v&&(v.d(1),v=null),E&1&&ke(a,"display",M[0]),y===(y=w(M))&&I?I.p(M,E):(I.d(1),I=y(M),I&&(I.c(),I.m(h,null))),E&1&&ke(h,"display",M[0])},i:q,o:q,d(M){M&&A(e),v&&v.d(),I.d(),d=!1,p()}}}function Ai(n,e,t){let s;pe(n,Pe,a=>t(2,s=a));let i=window.innerWidth>768?"flex":"none",o=window.innerWidth>768?"none":"inline";async function r(){hs(Pe,s=null,s),localStorage.removeItem("userId"),Tt("/")}function l(){t(0,i=i==="flex"?"none":"flex")}return window.onresize=()=>{t(0,i=window.innerWidth>768?"flex":"none"),t(1,o=window.innerWidth>768?"none":"inline")},t(0,i=window.innerWidth>768?"flex":"none"),t(1,o=window.innerWidth>768?"none":"inline"),[i,o,s,r,l]}class Di extends ie{constructor(e){super(),ne(this,e,Ai,Mi,te,{})}}function Li(n){let e,t,s,i,o,r,l,a,c,u,_,f,m,h,d,p,v,w,y,I,M,E,C,N,O,j,re,oe,S;return{c(){e=k("form"),t=k("h3"),t.innerHTML=`<i class="fas fa-upload"></i>
    Upload Puzzle`,s=T(),i=k("div"),o=k("label"),o.textContent="PGN",r=T(),l=k("input"),a=T(),c=k("div"),u=k("label"),u.textContent="Description",_=T(),f=k("input"),m=T(),h=k("div"),d=k("label"),d.textContent="Solution (csv format)",p=T(),v=k("input"),w=T(),y=k("div"),I=k("label"),I.textContent="Tags (csv format)",M=T(),E=k("input"),C=T(),N=k("button"),N.textContent="Submit",O=T(),j=k("div"),re=k("small"),re.textContent=`${Oi}`,b(o,"for","pgn"),b(o,"class","svelte-19zu4g4"),b(l,"type","text"),b(l,"id","pgn"),b(u,"for","description"),b(u,"class","svelte-19zu4g4"),b(f,"type","text"),b(f,"id","description"),b(d,"for","solution"),b(d,"class","svelte-19zu4g4"),b(v,"type","text"),b(v,"id","solution"),b(I,"for","tags"),b(I,"class","svelte-19zu4g4"),b(E,"type","text"),b(E,"id","tags"),b(N,"type","submit"),b(N,"class","svelte-19zu4g4"),b(j,"id","error_message"),b(j,"class","svelte-19zu4g4"),b(e,"class","flex mx-auto col-6 svelte-19zu4g4")},m(P,F){D(P,e,F),g(e,t),g(e,s),g(e,i),g(i,o),g(i,r),g(i,l),de(l,n[0]),g(e,a),g(e,c),g(c,u),g(c,_),g(c,f),de(f,n[1]),g(e,m),g(e,h),g(h,d),g(h,p),g(h,v),de(v,n[2]),g(e,w),g(e,y),g(y,I),g(y,M),g(y,E),de(E,n[3]),g(e,C),g(e,N),g(e,O),g(e,j),g(j,re),oe||(S=[U(l,"input",n[5]),U(f,"input",n[6]),U(v,"input",n[7]),U(E,"input",n[8]),U(e,"submit",_s(n[4]))],oe=!0)},p(P,[F]){F&1&&l.value!==P[0]&&de(l,P[0]),F&2&&f.value!==P[1]&&de(f,P[1]),F&4&&v.value!==P[2]&&de(v,P[2]),F&8&&E.value!==P[3]&&de(E,P[3])},i:q,o:q,d(P){P&&A(e),oe=!1,me(S)}}}let Oi="";function Ni(n,e,t){let s;pe(n,Pe,m=>t(9,s=m));let i="",o="",r="",l="";async function a(){(await fetch("https://sveltebackendv2.onrender.com/posts",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:s,pgn:i,puzzle:{solution:r.split(",")},description:o,tags:l.split(",")})})).status===200?Tt("/"):console.log("error")}function c(){i=this.value,t(0,i)}function u(){o=this.value,t(1,o)}function _(){r=this.value,t(2,r)}function f(){l=this.value,t(3,l)}return[i,o,r,l,a,c,u,_,f]}class Ri extends ie{constructor(e){super(),ne(this,e,Ni,Li,te,{})}}function qi(n){let e;return{c(){e=G("Home page")},m(t,s){D(t,e,s)},d(t){t&&A(e)}}}function zi(n){let e,t,s,i,o,r,l,a,c,u;return c=new Zs({props:{to:"/",style:"all: unset;",$$slots:{default:[qi]},$$scope:{ctx:n}}}),{c(){e=k("div"),t=k("h1"),t.textContent="What are you doing here? 🤔",s=T(),i=k("h3"),i.textContent="You don't have permission to access this page 🤕",o=T(),r=k("h4"),l=G(`Go back to\r
    `),a=k("button"),$(c.$$.fragment),b(i,"class","svelte-15efuyw"),b(r,"class","svelte-15efuyw"),b(e,"class","container svelte-15efuyw")},m(_,f){D(_,e,f),g(e,t),g(e,s),g(e,i),g(e,o),g(e,r),g(r,l),g(r,a),V(c,a,null),u=!0},p(_,[f]){const m={};f&1&&(m.$$scope={dirty:f,ctx:_}),c.$set(m)},i(_){u||(H(c.$$.fragment,_),u=!0)},o(_){K(c.$$.fragment,_),u=!1},d(_){_&&A(e),x(c)}}}class Hi extends ie{constructor(e){super(),ne(this,e,null,zi,te,{})}}function Ki(n){let e,t;return e=new qe({props:{path:"/new_post",component:Hi}}),{c(){$(e.$$.fragment)},m(s,i){V(e,s,i),t=!0},p:q,i(s){t||(H(e.$$.fragment,s),t=!0)},o(s){K(e.$$.fragment,s),t=!1},d(s){x(e,s)}}}function ji(n){let e,t;return e=new qe({props:{path:"/new_post",component:Ri}}),{c(){$(e.$$.fragment)},m(s,i){V(e,s,i),t=!0},p:q,i(s){t||(H(e.$$.fragment,s),t=!0)},o(s){K(e.$$.fragment,s),t=!1},d(s){x(e,s)}}}function Fi(n){let e,t,s,i,o,r,l,a,c,u,_,f;e=new qe({props:{path:"/",component:si}}),s=new qe({props:{path:"/puzzles",component:ai}}),o=new qe({props:{path:"/stockfish",component:Pi}}),l=new qe({props:{path:"/login",component:_i}});const m=[ji,Ki],h=[];function d(p,v){return p[0]!==null?0:1}return c=d(n),u=h[c]=m[c](n),{c(){$(e.$$.fragment),t=T(),$(s.$$.fragment),i=T(),$(o.$$.fragment),r=T(),$(l.$$.fragment),a=T(),u.c(),_=je()},m(p,v){V(e,p,v),D(p,t,v),V(s,p,v),D(p,i,v),V(o,p,v),D(p,r,v),V(l,p,v),D(p,a,v),h[c].m(p,v),D(p,_,v),f=!0},p(p,v){let w=c;c=d(p),c===w?h[c].p(p,v):(De(),K(h[w],1,1,()=>{h[w]=null}),Le(),u=h[c],u?u.p(p,v):(u=h[c]=m[c](p),u.c()),H(u,1),u.m(_.parentNode,_))},i(p){f||(H(e.$$.fragment,p),H(s.$$.fragment,p),H(o.$$.fragment,p),H(l.$$.fragment,p),H(u),f=!0)},o(p){K(e.$$.fragment,p),K(s.$$.fragment,p),K(o.$$.fragment,p),K(l.$$.fragment,p),K(u),f=!1},d(p){x(e,p),p&&A(t),x(s,p),p&&A(i),x(o,p),p&&A(r),x(l,p),p&&A(a),h[c].d(p),p&&A(_)}}}function Bi(n){let e,t,s,i;return e=new Di({}),s=new _n({props:{$$slots:{default:[Fi]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment),t=T(),$(s.$$.fragment)},m(o,r){V(e,o,r),D(o,t,r),V(s,o,r),i=!0},p(o,[r]){const l={};r&3&&(l.$$scope={dirty:r,ctx:o}),s.$set(l)},i(o){i||(H(e.$$.fragment,o),H(s.$$.fragment,o),i=!0)},o(o){K(e.$$.fragment,o),K(s.$$.fragment,o),i=!1},d(o){x(e,o),o&&A(t),x(s,o)}}}function Gi(n,e,t){let s;return pe(n,Pe,i=>t(0,s=i)),[s]}class Ui extends ie{constructor(e){super(),ne(this,e,Gi,Bi,te,{})}}new Ui({target:document.getElementById("app")});
